{"ast":null,"code":"var _jsxFileName = \"/home/dehlia/prospection/tableau-entreprises/frontend/src/App.jsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport CompanyProspectList from \"./companyprospect.jsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [companyName, setCompanyName] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  async function handleSearch() {\n    _s();\n    if (!companyName || !postalCode) {\n      alert(\"Veuillez entrer le nom et le code postal de l'entreprise.\");\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    const [data, setData] = useState([{\n      nom: \"Test\",\n      adresse: \"Paris\",\n      secteur: \"IT\",\n      resume: \"Test entreprise\",\n      contacts: []\n    }]);\n    try {\n      const response = await fetch(\"http://localhost:5000/prospect\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          companyName,\n          location: postalCode\n        })\n      });\n      if (!response.ok) throw new Error(\"Erreur lors de la recherche\");\n      const result = await response.json();\n      console.log(\"üì¶ Donn√©es re√ßues :\", result);\n\n      // Ici, on parse le texte re√ßu\n      const text = result.result || \"\";\n      const regex = /\\d+\\.\\s*Entreprise\\s*:\\s*(.+?)\\n\\s*-\\s*Secteur\\s*:\\s*(.+?)\\n\\s*-\\s*Localisation\\s*:\\s*(.+?)\\n\\s*-\\s*Code postal\\s*:\\s*(.+?)\\n\\s*-\\s*Nombre d'employ√©s\\s*:\\s*(.+?)\\n+([\\s\\S]*?)(?=\\n\\d+\\. Entreprise|$)/g;\n      const entreprises = [];\n      let match;\n      while ((match = regex.exec(text)) !== null) {\n        const [_, nom, secteur, adresse, codePostal, effectif, contactsBlock] = match;\n        const contactRegex = /-\\s*(Directeur G√©n√©ral|Responsable [^:]+)\\s*:\\s*([^\\n]+)\\n\\s*- Email\\s*:\\s*([^\\n]+)\\n\\s*- T√©l√©phone\\s*:\\s*([^\\n]+)\\n\\s*- LinkedIn\\s*:\\s*([^\\n]+)/g;\n        const contacts = [];\n        let c;\n        while ((c = contactRegex.exec(contactsBlock)) !== null) {\n          contacts.push({\n            poste: c[1],\n            nom: c[2],\n            email: c[3] === \"non disponible\" ? \"\" : c[3],\n            telephone: c[4] === \"non disponible\" ? \"\" : c[4],\n            linkedin: c[5].includes(\"non disponible\") ? \"\" : `https://linkedin.com/in/${c[5].trim()}`\n          });\n        }\n        entreprises.push({\n          nom: nom.trim(),\n          adresse: `${adresse.trim()} (${codePostal.trim()})`,\n          secteur: secteur.trim(),\n          resume: `Effectif : ${effectif.trim()}`,\n          contacts,\n          site_web: \"\",\n          sources: [\"Groq AI\"]\n        });\n      }\n      console.log(\"‚úÖ Entreprises extraites :\", entreprises);\n      setData(entreprises);\n    } catch (err) {\n      console.error(err);\n      setError(\"Impossible de r√©cup√©rer les donn√©es. V√©rifiez le backend.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  _s(handleSearch, \"/td2z5oOf9+qCYHQECAtuHQ44jU=\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Prospection Entreprises\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: companyName,\n        onChange: e => setCompanyName(e.target.value),\n        placeholder: \"Nom de l'entreprise\",\n        className: \"flex-1 p-2 border rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: postalCode,\n        onChange: e => setPostalCode(e.target.value),\n        placeholder: \"Code postal\",\n        className: \"flex-1 p-2 border rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearch,\n        className: \"px-3 py-2 bg-slate-700 text-white rounded\",\n        children: loading ? \"Chargement...\" : \"Rechercher\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Recherche en cours...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(CompanyProspectList, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"IitQKlUG1vlEllv/da0Ef6oAo2k=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","CompanyProspectList","jsxDEV","_jsxDEV","App","_s2","_s","$RefreshSig$","companyName","setCompanyName","postalCode","setPostalCode","data","setData","loading","setLoading","error","setError","handleSearch","alert","nom","adresse","secteur","resume","contacts","response","fetch","method","headers","body","JSON","stringify","location","ok","Error","result","json","console","log","text","regex","entreprises","match","exec","_","codePostal","effectif","contactsBlock","contactRegex","c","push","poste","email","telephone","linkedin","includes","trim","site_web","sources","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onClick","length","_c","$RefreshReg$"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport CompanyProspectList from \"./companyprospect.jsx\";\n\nexport default function App() {\n  const [companyName, setCompanyName] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  async function handleSearch() {\n    if (!companyName || !postalCode) {\n      alert(\"Veuillez entrer le nom et le code postal de l'entreprise.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    const [data, setData] = useState([\n      { nom: \"Test\", adresse: \"Paris\", secteur: \"IT\", resume: \"Test entreprise\", contacts: [] }\n    ]);\n\n\n    try {\n      const response = await fetch(\"http://localhost:5000/prospect\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ companyName, location: postalCode }),\n      });\n\n      if (!response.ok) throw new Error(\"Erreur lors de la recherche\");\n\n      const result = await response.json();\n      console.log(\"üì¶ Donn√©es re√ßues :\", result);\n\n      // Ici, on parse le texte re√ßu\n      const text = result.result || \"\";\n      const regex = /\\d+\\.\\s*Entreprise\\s*:\\s*(.+?)\\n\\s*-\\s*Secteur\\s*:\\s*(.+?)\\n\\s*-\\s*Localisation\\s*:\\s*(.+?)\\n\\s*-\\s*Code postal\\s*:\\s*(.+?)\\n\\s*-\\s*Nombre d'employ√©s\\s*:\\s*(.+?)\\n+([\\s\\S]*?)(?=\\n\\d+\\. Entreprise|$)/g;\n\n      const entreprises = [];\n      let match;\n      while ((match = regex.exec(text)) !== null) {\n        const [_, nom, secteur, adresse, codePostal, effectif, contactsBlock] = match;\n\n        const contactRegex =\n          /-\\s*(Directeur G√©n√©ral|Responsable [^:]+)\\s*:\\s*([^\\n]+)\\n\\s*- Email\\s*:\\s*([^\\n]+)\\n\\s*- T√©l√©phone\\s*:\\s*([^\\n]+)\\n\\s*- LinkedIn\\s*:\\s*([^\\n]+)/g;\n\n        const contacts = [];\n        let c;\n        while ((c = contactRegex.exec(contactsBlock)) !== null) {\n          contacts.push({\n            poste: c[1],\n            nom: c[2],\n            email: c[3] === \"non disponible\" ? \"\" : c[3],\n            telephone: c[4] === \"non disponible\" ? \"\" : c[4],\n            linkedin: c[5].includes(\"non disponible\") ? \"\" : `https://linkedin.com/in/${c[5].trim()}`,\n          });\n        }\n\n        entreprises.push({\n          nom: nom.trim(),\n          adresse: `${adresse.trim()} (${codePostal.trim()})`,\n          secteur: secteur.trim(),\n          resume: `Effectif : ${effectif.trim()}`,\n          contacts,\n          site_web: \"\",\n          sources: [\"Groq AI\"],\n        });\n      }\n\n      console.log(\"‚úÖ Entreprises extraites :\", entreprises);\n      setData(entreprises);\n    } catch (err) {\n      console.error(err);\n      setError(\"Impossible de r√©cup√©rer les donn√©es. V√©rifiez le backend.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Prospection Entreprises</h1>\n\n      <div className=\"flex gap-2 mb-4\">\n        <input\n          value={companyName}\n          onChange={(e) => setCompanyName(e.target.value)}\n          placeholder=\"Nom de l'entreprise\"\n          className=\"flex-1 p-2 border rounded\"\n        />\n        <input\n          value={postalCode}\n          onChange={(e) => setPostalCode(e.target.value)}\n          placeholder=\"Code postal\"\n          className=\"flex-1 p-2 border rounded\"\n        />\n        <button\n          onClick={handleSearch}\n          className=\"px-3 py-2 bg-slate-700 text-white rounded\"\n        >\n          {loading ? \"Chargement...\" : \"Rechercher\"}\n        </button>\n      </div>\n\n      {error && <p className=\"text-red-600\">{error}</p>}\n      {loading && <p>Recherche en cours...</p>}\n\n      {data.length > 0 && <CompanyProspectList data={data} />}\n      \n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}