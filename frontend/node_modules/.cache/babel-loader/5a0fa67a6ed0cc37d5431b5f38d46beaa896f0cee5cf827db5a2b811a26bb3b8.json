{"ast":null,"code":"var _jsxFileName = \"/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\n});\nexport default function MapProspects({\n  onSearch\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [companyName, setCompanyName] = useState('');\n  const [postalCode, setPostalCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [center, setCenter] = useState({\n    lat: 48.8566,\n    lng: 2.3522\n  });\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Fonction de recherche\n  // Fonction de recherche\n  const handleSearch = async e => {\n    if (e) e.preventDefault();\n    if (!companyName || !postalCode) {\n      setError('Nom et code postal requis');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch('http://localhost:5000/prospect', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          companyName: companyName,\n          // <-- cl√© attendue par le backend\n          postalCode: postalCode,\n          // <-- PAS \"location\"\n          radiusKm: filters.radius || 100 // <-- ton slider rayon\n        })\n      });\n      const text = await res.text();\n      let js = null;\n      try {\n        js = text ? JSON.parse(text) : null;\n      } catch (parseErr) {\n        setError(`R√©ponse inattendue du serveur (status ${res.status})`);\n        setLoading(false);\n        return;\n      }\n      if (!res.ok) {\n        var _js;\n        setError(((_js = js) === null || _js === void 0 ? void 0 : _js.error) || `Erreur serveur (${res.status})`);\n        setLoading(false);\n        return;\n      }\n      const companies = (js.data || []).map((c, i) => ({\n        id: i,\n        name: c.nom || c.nom_entreprise || \"Inconnu\",\n        address: c.adresse || c.adresse_siege || \"\",\n        sector: c.secteur || c.libelle_activite_principale || c.libelle_naf || \"\",\n        site: c.site_web || c.site || \"\",\n        telephone: c.telephone || \"\",\n        contacts: c.contacts || [],\n        latitude: c.latitude || c.lat || null,\n        longitude: c.longitude || c.lng || null,\n        ville: c.ville || \"\",\n        code_postal: c.code_postal || \"\",\n        adresse: c.adresse || \"\",\n        naf: c.naf || c.activite_principale || \"\",\n        siren: c.siren || `temp-${i}`\n      }));\n      setData(companies);\n\n      // Centre la carte\n      if (companies.length > 0 && companies[0].latitude && companies[0].longitude) {\n        const firstLat = parseFloat(companies[0].latitude);\n        const firstLng = parseFloat(companies[0].longitude);\n        if (mapInstance.current && !isNaN(firstLat) && !isNaN(firstLng)) {\n          mapInstance.current.setView([firstLat, firstLng], 12);\n          setCenter({\n            lat: firstLat,\n            lng: firstLng\n          });\n        }\n      }\n    } catch (err) {\n      setError(err.message || 'Erreur r√©seau');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 6);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n    if (filteredData.length === 0) return;\n    const bounds = [];\n    const seenAddresses = new Map();\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      const iconColor = isFavorite ? '#f4b400' : hasContacts ? '#0f9d58' : '#db4437';\n      const iconSize = isFavorite ? 32 : 24;\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize / 2, iconSize / 2]\n      });\n      const marker = L.marker([lat, lng], {\n        icon: customIcon\n      }).addTo(mapInstance.current).bindPopup(() => createPopupContent(company)).on('click', () => setSelectedCompany(company.siren));\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = company => {\n    const contactsHtml = company.contacts && company.contacts.length > 0 ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      ` : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  }; // Applique les filtres\n  const applyFilters = () => {\n    // Si pas de donn√©es, pas de filtrage\n    if (data.length === 0) {\n      setFilteredData([]);\n      return;\n    }\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n      return true;\n    });\n    setFilteredData(filtered);\n  };\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data, center]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = siren => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '380px',\n        background: 'white',\n        borderRight: '1px solid #ddd',\n        overflowY: 'auto',\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginBottom: '16px',\n          fontSize: '20px'\n        },\n        children: \"\\uD83C\\uDFAF Prospection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '6px',\n              fontWeight: '500',\n              fontSize: '13px'\n            },\n            children: \"Nom entreprise\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ex: Castorama\",\n            value: companyName,\n            onChange: e => setCompanyName(e.target.value),\n            style: {\n              width: '100%',\n              padding: '10px',\n              borderRadius: '8px',\n              border: '1px solid #ddd',\n              fontSize: '14px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '6px',\n              fontWeight: '500',\n              fontSize: '13px'\n            },\n            children: \"Code postal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ex: 75015\",\n            value: postalCode,\n            onChange: e => setPostalCode(e.target.value),\n            style: {\n              width: '100%',\n              padding: '10px',\n              borderRadius: '8px',\n              border: '1px solid #ddd',\n              fontSize: '14px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: loading ? '#ccc' : '#1a73e8',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '15px',\n            fontWeight: '600',\n            cursor: loading ? 'not-allowed' : 'pointer',\n            transition: 'background 0.2s'\n          },\n          children: loading ? 'üîÑ Recherche...' : 'üîç Rechercher'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: '#fee',\n          color: '#c00',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          fontSize: '13px'\n        },\n        children: [\"\\u274C \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), data.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          textAlign: 'center',\n          color: '#666',\n          fontSize: '14px'\n        },\n        children: \"\\uD83D\\uDCCD Effectuez une recherche pour afficher des entreprises\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            marginRight: '8px',\n            fontSize: '13px'\n          },\n          children: [data.length, \" entreprises\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            fontSize: '13px'\n          },\n          children: [filteredData.length, \" visibles\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '12px',\n            background: '#f0f9ff',\n            borderRadius: '8px',\n            marginBottom: '16px',\n            fontSize: '13px',\n            color: '#1e3a8a'\n          },\n          children: [\"\\uD83D\\uDCCD Recherche autour de: \", postalCode || 'Non d√©fini']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this)\n      }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500',\n            fontSize: '13px'\n          },\n          children: \"\\uD83C\\uDFE2 Secteur NAF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.sector,\n          onChange: e => setFilters({\n            ...filters,\n            sector: e.target.value\n          }),\n          style: {\n            width: '100%',\n            padding: '10px',\n            borderRadius: '8px',\n            border: '1px solid #ddd'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tous les secteurs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this), sectors.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s,\n            children: s\n          }, s, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 31\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '8px',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasEmail,\n            onChange: e => setFilters({\n              ...filters,\n              hasEmail: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), \"Avec Email\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasPhone,\n            onChange: e => setFilters({\n              ...filters,\n              hasPhone: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), \"Avec T\\xE9l\\xE9phone\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto'\n        },\n        children: filteredData.map((company, i) => {\n          const isFav = favorites.has(company.siren);\n          const isSelected = selectedCompany === company.siren;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: isSelected ? '#e8f0fe' : 'white',\n              border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n              borderRadius: '12px',\n              padding: '16px',\n              marginBottom: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s'\n            },\n            onClick: () => {\n              setSelectedCompany(company.siren);\n              const lat = parseFloat(company.latitude);\n              const lng = parseFloat(company.longitude);\n              if (lat && lng && mapInstance.current) {\n                mapInstance.current.setView([lat, lng], 14);\n                const marker = markersRef.current.find(m => {\n                  const pos = m.getLatLng();\n                  return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                });\n                if (marker) marker.openPopup();\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  fontSize: '15px'\n                },\n                children: company.name || company.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  toggleFavorite(company.siren);\n                },\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '20px',\n                  padding: '0 4px'\n                },\n                children: isFav ? '‚≠ê' : '‚òÜ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '13px',\n                color: '#666'\n              },\n              children: [\"\\uD83D\\uDCCD \", company.ville, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 37\n              }, this), \"\\uD83C\\uDFE2 \", (company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        flex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n}\n_s(MapProspects, \"DkIQBLRr3fNGwTuANqW+j48bAEM=\");\n_c = MapProspects;\nvar _c;\n$RefreshReg$(_c, \"MapProspects\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsxDEV","_jsxDEV","Fragment","_Fragment","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapProspects","onSearch","_s","mapRef","mapInstance","markersRef","data","setData","filteredData","setFilteredData","companyName","setCompanyName","postalCode","setPostalCode","loading","setLoading","error","setError","center","setCenter","lat","lng","filters","setFilters","radius","sector","hasEmail","hasPhone","favorites","setFavorites","Set","JSON","parse","localStorage","getItem","selectedCompany","setSelectedCompany","handleSearch","e","preventDefault","res","fetch","method","headers","body","stringify","radiusKm","text","js","parseErr","status","ok","_js","companies","map","c","i","id","name","nom","nom_entreprise","address","adresse","adresse_siege","secteur","libelle_activite_principale","libelle_naf","site","site_web","telephone","contacts","latitude","longitude","ville","code_postal","naf","activite_principale","siren","length","firstLat","parseFloat","firstLng","current","isNaN","setView","err","message","tileLayer","attribution","maxZoom","addTo","console","log","forEach","m","removeLayer","bounds","seenAddresses","Map","company","addressKey","toFixed","has","set","hasContacts","isFavorite","iconColor","iconSize","customIcon","divIcon","className","html","iconAnchor","marker","icon","bindPopup","createPopupContent","on","push","fitBounds","padding","contactsHtml","poste","email","linkedin","join","applyFilters","filtered","filter","some","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","a","sin","cos","atan2","sqrt","toggleFavorite","newFavorites","delete","add","setItem","sectors","Boolean","style","display","height","children","width","background","borderRight","overflowY","flexDirection","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","fontWeight","type","placeholder","value","onChange","target","borderRadius","border","disabled","color","cursor","transition","textAlign","marginRight","s","alignItems","checked","flex","isFav","isSelected","onClick","find","pos","getLatLng","abs","openPopup","justifyContent","stopPropagation","substring","ref","_c","$RefreshReg$"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n});\n\nexport default function MapProspects({ onSearch }) {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [companyName, setCompanyName] = useState('');\n  const [postalCode, setPostalCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [center, setCenter] = useState({ lat: 48.8566, lng: 2.3522 });\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Fonction de recherche\n  // Fonction de recherche\nconst handleSearch = async (e) => {\n  if (e) e.preventDefault();\n\n  if (!companyName || !postalCode) {\n    setError('Nom et code postal requis');\n    return;\n  }\n\n  setLoading(true);\n  setError(null);\n\n  try {\n    const res = await fetch('http://localhost:5000/prospect', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        companyName: companyName,          // <-- cl√© attendue par le backend\n        postalCode: postalCode,            // <-- PAS \"location\"\n        radiusKm: filters.radius || 100,   // <-- ton slider rayon\n      }),\n    });\n\n    const text = await res.text();\n    let js = null;\n    try {\n      js = text ? JSON.parse(text) : null;\n    } catch (parseErr) {\n      setError(`R√©ponse inattendue du serveur (status ${res.status})`);\n      setLoading(false);\n      return;\n    }\n\n    if (!res.ok) {\n      setError(js?.error || `Erreur serveur (${res.status})`);\n      setLoading(false);\n      return;\n    }\n\n    const companies = (js.data || []).map((c, i) => ({\n      id: i,\n      name: c.nom || c.nom_entreprise || \"Inconnu\",\n      address: c.adresse || c.adresse_siege || \"\",\n      sector: c.secteur || c.libelle_activite_principale || c.libelle_naf || \"\",\n      site: c.site_web || c.site || \"\",\n      telephone: c.telephone || \"\",\n      contacts: c.contacts || [],\n      latitude: c.latitude || c.lat || null,\n      longitude: c.longitude || c.lng || null,\n      ville: c.ville || \"\",\n      code_postal: c.code_postal || \"\",\n      adresse: c.adresse || \"\",\n      naf: c.naf || c.activite_principale || \"\",\n      siren: c.siren || `temp-${i}`,\n    }));\n\n    setData(companies);\n\n    // Centre la carte\n    if (companies.length > 0 && companies[0].latitude && companies[0].longitude) {\n      const firstLat = parseFloat(companies[0].latitude);\n      const firstLng = parseFloat(companies[0].longitude);\n      if (mapInstance.current && !isNaN(firstLat) && !isNaN(firstLng)) {\n        mapInstance.current.setView([firstLat, firstLng], 12);\n        setCenter({ lat: firstLat, lng: firstLng });\n      }\n    }\n  } catch (err) {\n    setError(err.message || 'Erreur r√©seau');\n  } finally {\n    setLoading(false);\n  }\n};\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 6);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n\n    if (filteredData.length === 0) return;\n\n    const bounds = [];\n    const seenAddresses = new Map();\n\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      \n      const iconColor = isFavorite ? '#f4b400' : (hasContacts ? '#0f9d58' : '#db4437');\n      const iconSize = isFavorite ? 32 : 24;\n\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize/2, iconSize/2]\n      });\n\n      const marker = L.marker([lat, lng], { icon: customIcon })\n        .addTo(mapInstance.current)\n        .bindPopup(() => createPopupContent(company))\n        .on('click', () => setSelectedCompany(company.siren));\n\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = (company) => {\n    const contactsHtml = company.contacts && company.contacts.length > 0\n      ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      `\n      : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  };  // Applique les filtres\n  const applyFilters = () => {\n    // Si pas de donn√©es, pas de filtrage\n    if (data.length === 0) {\n      setFilteredData([]);\n      return;\n    }\n\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      \n      if (!lat || !lng) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n\n      return true;\n    });\n\n    setFilteredData(filtered);\n  };\n\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data, center]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n              Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = (siren) => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n\n  return (\n    <div style={{ display: 'flex', height: '100vh' }}>\n      {/* Sidebar */}\n      <div style={{ \n        width: '380px', \n        background: 'white', \n        borderRight: '1px solid #ddd', \n        overflowY: 'auto', \n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      }}>\n        <h2 style={{ marginBottom: '16px', fontSize: '20px' }}>üéØ Prospection</h2>\n        \n        {/* Formulaire de recherche */}\n        <form onSubmit={handleSearch} style={{ marginBottom: '20px' }}>\n          <div style={{ marginBottom: '12px' }}>\n            <label style={{ display: 'block', marginBottom: '6px', fontWeight: '500', fontSize: '13px' }}>\n              Nom entreprise\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Ex: Castorama\"\n              value={companyName}\n              onChange={(e) => setCompanyName(e.target.value)}\n              style={{ \n                width: '100%', \n                padding: '10px', \n                borderRadius: '8px', \n                border: '1px solid #ddd',\n                fontSize: '14px'\n              }}\n            />\n          </div>\n          \n          <div style={{ marginBottom: '12px' }}>\n            <label style={{ display: 'block', marginBottom: '6px', fontWeight: '500', fontSize: '13px' }}>\n              Code postal\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Ex: 75015\"\n              value={postalCode}\n              onChange={(e) => setPostalCode(e.target.value)}\n              style={{ \n                width: '100%', \n                padding: '10px', \n                borderRadius: '8px', \n                border: '1px solid #ddd',\n                fontSize: '14px'\n              }}\n            />\n          </div>\n          \n          <button \n            type=\"submit\" \n            disabled={loading}\n            style={{ \n              width: '100%', \n              padding: '12px', \n              background: loading ? '#ccc' : '#1a73e8',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              fontSize: '15px',\n              fontWeight: '600',\n              cursor: loading ? 'not-allowed' : 'pointer',\n              transition: 'background 0.2s'\n            }}\n          >\n            {loading ? 'üîÑ Recherche...' : 'üîç Rechercher'}\n          </button>\n        </form>\n\n        {error && (\n          <div style={{ \n            padding: '12px', \n            background: '#fee', \n            color: '#c00', \n            borderRadius: '8px', \n            marginBottom: '16px',\n            fontSize: '13px'\n          }}>\n            ‚ùå {error}\n          </div>\n        )}\n\n        {data.length === 0 && !loading && (\n          <div style={{ \n            padding: '20px', \n            textAlign: 'center', \n            color: '#666',\n            fontSize: '14px'\n          }}>\n            üìç Effectuez une recherche pour afficher des entreprises\n          </div>\n        )}\n        <div style={{ marginBottom: '20px' }}>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', marginRight: '8px', fontSize: '13px' }}>\n            {data.length} entreprises\n          </span>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', fontSize: '13px' }}>\n            {filteredData.length} visibles\n          </span>\n        </div>\n\n        {/* Filtres */}\n        {data.length > 0 && (\n          <>\n            <div style={{ \n              padding: '12px', \n              background: '#f0f9ff', \n              borderRadius: '8px', \n              marginBottom: '16px',\n              fontSize: '13px',\n              color: '#1e3a8a'\n            }}>\n              üìç Recherche autour de: {postalCode || 'Non d√©fini'}\n            </div>\n          </>\n        )}\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', fontSize: '13px' }}>üè¢ Secteur NAF</label>\n          <select\n            value={filters.sector}\n            onChange={(e) => setFilters({ ...filters, sector: e.target.value })}\n            style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #ddd' }}\n          >\n            <option value=\"\">Tous les secteurs</option>\n            {sectors.map(s => <option key={s} value={s}>{s}</option>)}\n          </select>\n        </div>\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'flex', alignItems: 'center', marginBottom: '8px', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasEmail}\n              onChange={(e) => setFilters({ ...filters, hasEmail: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec Email\n          </label>\n          <label style={{ display: 'flex', alignItems: 'center', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasPhone}\n              onChange={(e) => setFilters({ ...filters, hasPhone: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec T√©l√©phone\n          </label>\n        </div>\n\n        {/* Liste */}\n        <div style={{ flex: 1, overflowY: 'auto' }}>\n          {filteredData.map((company, i) => {\n            const isFav = favorites.has(company.siren);\n            const isSelected = selectedCompany === company.siren;\n            return (\n              <div\n                key={i}\n                style={{\n                  background: isSelected ? '#e8f0fe' : 'white',\n                  border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n                  borderRadius: '12px',\n                  padding: '16px',\n                  marginBottom: '12px',\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n                onClick={() => {\n                  setSelectedCompany(company.siren);\n                  const lat = parseFloat(company.latitude);\n                  const lng = parseFloat(company.longitude);\n                  if (lat && lng && mapInstance.current) {\n                    mapInstance.current.setView([lat, lng], 14);\n                    const marker = markersRef.current.find(m => {\n                      const pos = m.getLatLng();\n                      return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                    });\n                    if (marker) marker.openPopup();\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                  <strong style={{ fontSize: '15px' }}>{company.name || company.nom}</strong>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      toggleFavorite(company.siren);\n                    }}\n                    style={{ \n                      background: 'none', \n                      border: 'none', \n                      cursor: 'pointer', \n                      fontSize: '20px',\n                      padding: '0 4px'\n                    }}\n                  >\n                    {isFav ? '‚≠ê' : '‚òÜ'}\n                  </button>\n                </div>\n                <div style={{ fontSize: '13px', color: '#666' }}>\n                  üìç {company.ville}<br />\n                  üè¢ {(company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Carte */}\n      <div ref={mapRef} style={{ flex: 1 }} />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}