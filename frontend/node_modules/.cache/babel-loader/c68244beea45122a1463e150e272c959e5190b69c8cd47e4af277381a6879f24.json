{"ast":null,"code":"var _jsxFileName = \"/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\n});\nexport default function MapProspects({\n  data = [],\n  center = {\n    lat: 48.8566,\n    lng: 2.3522\n  }\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [filteredData, setFilteredData] = useState(data);\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 10);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n    if (filteredData.length === 0) return;\n    const bounds = [];\n    const seenAddresses = new Map();\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      const iconColor = isFavorite ? '#f4b400' : hasContacts ? '#0f9d58' : '#db4437';\n      const iconSize = isFavorite ? 32 : 24;\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize / 2, iconSize / 2]\n      });\n      const marker = L.marker([lat, lng], {\n        icon: customIcon\n      }).addTo(mapInstance.current).bindPopup(() => createPopupContent(company)).on('click', () => setSelectedCompany(company.siren));\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = company => {\n    const contactsHtml = company.contacts && company.contacts.length > 0 ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      ` : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  };\n\n  // Applique les filtres\n  const applyFilters = () => {\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng) return false;\n\n      // Filtre rayon\n      const distance = calculateDistance(center.lat, center.lng, lat, lng);\n      if (distance > filters.radius) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n      return true;\n    });\n    setFilteredData(filtered);\n  };\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = siren => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n  if (data.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        fontSize: '18px',\n        color: '#666'\n      },\n      children: \"\\uD83D\\uDCCD Aucune entreprise \\xE0 afficher. Effectuez une recherche d'abord.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '380px',\n        background: 'white',\n        borderRight: '1px solid #ddd',\n        overflowY: 'auto',\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginBottom: '16px'\n        },\n        children: \"\\uD83C\\uDFAF Prospection Interactive\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            marginRight: '8px',\n            fontSize: '13px'\n          },\n          children: [data.length, \" entreprises\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            fontSize: '13px'\n          },\n          children: [filteredData.length, \" visibles\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500',\n            fontSize: '13px'\n          },\n          children: [\"\\uD83D\\uDCCD Rayon: \", filters.radius, \" km\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          step: \"5\",\n          value: filters.radius,\n          onChange: e => setFilters({\n            ...filters,\n            radius: parseInt(e.target.value)\n          }),\n          style: {\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500',\n            fontSize: '13px'\n          },\n          children: \"\\uD83C\\uDFE2 Secteur NAF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.sector,\n          onChange: e => setFilters({\n            ...filters,\n            sector: e.target.value\n          }),\n          style: {\n            width: '100%',\n            padding: '10px',\n            borderRadius: '8px',\n            border: '1px solid #ddd'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tous les secteurs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), sectors.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s,\n            children: s\n          }, s, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 31\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '8px',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasEmail,\n            onChange: e => setFilters({\n              ...filters,\n              hasEmail: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), \"Avec Email\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasPhone,\n            onChange: e => setFilters({\n              ...filters,\n              hasPhone: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), \"Avec T\\xE9l\\xE9phone\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto'\n        },\n        children: filteredData.map((company, i) => {\n          const isFav = favorites.has(company.siren);\n          const isSelected = selectedCompany === company.siren;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: isSelected ? '#e8f0fe' : 'white',\n              border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n              borderRadius: '12px',\n              padding: '16px',\n              marginBottom: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s'\n            },\n            onClick: () => {\n              setSelectedCompany(company.siren);\n              const lat = parseFloat(company.latitude);\n              const lng = parseFloat(company.longitude);\n              if (lat && lng && mapInstance.current) {\n                mapInstance.current.setView([lat, lng], 14);\n                const marker = markersRef.current.find(m => {\n                  const pos = m.getLatLng();\n                  return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                });\n                if (marker) marker.openPopup();\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  fontSize: '15px'\n                },\n                children: company.name || company.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  toggleFavorite(company.siren);\n                },\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '20px',\n                  padding: '0 4px'\n                },\n                children: isFav ? '‚≠ê' : '‚òÜ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '13px',\n                color: '#666'\n              },\n              children: [\"\\uD83D\\uDCCD \", company.ville, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 37\n              }, this), \"\\uD83C\\uDFE2 \", (company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        flex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n}\n_s(MapProspects, \"uhnRIY8iTH/INu5ksXhOOaPWm+w=\");\n_c = MapProspects;\nvar _c;\n$RefreshReg$(_c, \"MapProspects\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapProspects","data","center","lat","lng","_s","mapRef","mapInstance","markersRef","filteredData","setFilteredData","filters","setFilters","radius","sector","hasEmail","hasPhone","favorites","setFavorites","Set","JSON","parse","localStorage","getItem","selectedCompany","setSelectedCompany","current","map","setView","tileLayer","attribution","maxZoom","addTo","console","log","forEach","m","removeLayer","length","bounds","seenAddresses","Map","company","parseFloat","latitude","longitude","isNaN","addressKey","toFixed","has","set","hasContacts","contacts","isFavorite","siren","iconColor","iconSize","customIcon","divIcon","className","html","iconAnchor","marker","icon","bindPopup","createPopupContent","on","push","fitBounds","padding","contactsHtml","c","nom","poste","email","telephone","linkedin","join","name","address","adresse","code_postal","ville","secteur","naf","site","site_web","applyFilters","filtered","filter","distance","calculateDistance","some","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","a","sin","cos","atan2","sqrt","toggleFavorite","newFavorites","delete","add","setItem","stringify","sectors","Boolean","style","display","alignItems","justifyContent","height","fontSize","color","children","fileName","_jsxFileName","lineNumber","columnNumber","width","background","borderRight","overflowY","flexDirection","marginBottom","borderRadius","marginRight","fontWeight","type","min","max","step","value","onChange","e","parseInt","target","border","s","checked","flex","i","isFav","isSelected","cursor","transition","onClick","find","pos","getLatLng","abs","openPopup","stopPropagation","substring","ref","_c","$RefreshReg$"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n});\n\nexport default function MapProspects({ data = [], center = { lat: 48.8566, lng: 2.3522 } }) {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [filteredData, setFilteredData] = useState(data);\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 10);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n\n    if (filteredData.length === 0) return;\n\n    const bounds = [];\n    const seenAddresses = new Map();\n\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      \n      const iconColor = isFavorite ? '#f4b400' : (hasContacts ? '#0f9d58' : '#db4437');\n      const iconSize = isFavorite ? 32 : 24;\n\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize/2, iconSize/2]\n      });\n\n      const marker = L.marker([lat, lng], { icon: customIcon })\n        .addTo(mapInstance.current)\n        .bindPopup(() => createPopupContent(company))\n        .on('click', () => setSelectedCompany(company.siren));\n\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = (company) => {\n    const contactsHtml = company.contacts && company.contacts.length > 0\n      ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      `\n      : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  };\n\n  // Applique les filtres\n  const applyFilters = () => {\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      \n      if (!lat || !lng) return false;\n\n      // Filtre rayon\n      const distance = calculateDistance(center.lat, center.lng, lat, lng);\n      if (distance > filters.radius) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n\n      return true;\n    });\n\n    setFilteredData(filtered);\n  };\n\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n              Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = (siren) => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n\n  if (data.length === 0) {\n    return (\n      <div style={{ \n        display: 'flex', \n        alignItems: 'center', \n        justifyContent: 'center', \n        height: '100vh',\n        fontSize: '18px',\n        color: '#666'\n      }}>\n        üìç Aucune entreprise √† afficher. Effectuez une recherche d'abord.\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ display: 'flex', height: '100vh' }}>\n      {/* Sidebar */}\n      <div style={{ \n        width: '380px', \n        background: 'white', \n        borderRight: '1px solid #ddd', \n        overflowY: 'auto', \n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      }}>\n        <h2 style={{ marginBottom: '16px' }}>üéØ Prospection Interactive</h2>\n        <div style={{ marginBottom: '20px' }}>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', marginRight: '8px', fontSize: '13px' }}>\n            {data.length} entreprises\n          </span>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', fontSize: '13px' }}>\n            {filteredData.length} visibles\n          </span>\n        </div>\n\n        {/* Filtres */}\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', fontSize: '13px' }}>\n            üìç Rayon: {filters.radius} km\n          </label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            step=\"5\"\n            value={filters.radius}\n            onChange={(e) => setFilters({ ...filters, radius: parseInt(e.target.value) })}\n            style={{ width: '100%' }}\n          />\n        </div>\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', fontSize: '13px' }}>üè¢ Secteur NAF</label>\n          <select\n            value={filters.sector}\n            onChange={(e) => setFilters({ ...filters, sector: e.target.value })}\n            style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #ddd' }}\n          >\n            <option value=\"\">Tous les secteurs</option>\n            {sectors.map(s => <option key={s} value={s}>{s}</option>)}\n          </select>\n        </div>\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'flex', alignItems: 'center', marginBottom: '8px', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasEmail}\n              onChange={(e) => setFilters({ ...filters, hasEmail: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec Email\n          </label>\n          <label style={{ display: 'flex', alignItems: 'center', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasPhone}\n              onChange={(e) => setFilters({ ...filters, hasPhone: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec T√©l√©phone\n          </label>\n        </div>\n\n        {/* Liste */}\n        <div style={{ flex: 1, overflowY: 'auto' }}>\n          {filteredData.map((company, i) => {\n            const isFav = favorites.has(company.siren);\n            const isSelected = selectedCompany === company.siren;\n            return (\n              <div\n                key={i}\n                style={{\n                  background: isSelected ? '#e8f0fe' : 'white',\n                  border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n                  borderRadius: '12px',\n                  padding: '16px',\n                  marginBottom: '12px',\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n                onClick={() => {\n                  setSelectedCompany(company.siren);\n                  const lat = parseFloat(company.latitude);\n                  const lng = parseFloat(company.longitude);\n                  if (lat && lng && mapInstance.current) {\n                    mapInstance.current.setView([lat, lng], 14);\n                    const marker = markersRef.current.find(m => {\n                      const pos = m.getLatLng();\n                      return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                    });\n                    if (marker) marker.openPopup();\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                  <strong style={{ fontSize: '15px' }}>{company.name || company.nom}</strong>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      toggleFavorite(company.siren);\n                    }}\n                    style={{ \n                      background: 'none', \n                      border: 'none', \n                      cursor: 'pointer', \n                      fontSize: '20px',\n                      padding: '0 4px'\n                    }}\n                  >\n                    {isFav ? '‚≠ê' : '‚òÜ'}\n                  </button>\n                </div>\n                <div style={{ fontSize: '13px', color: '#666' }}>\n                  üìç {company.ville}<br />\n                  üè¢ {(company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Carte */}\n      <div ref={mapRef} style={{ flex: 1 }} />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}