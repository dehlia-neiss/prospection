{"ast":null,"code":"import _objectSpread from\"/home/dehlia/prospection/tableau-entreprises/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from'react';import L from'leaflet';import'leaflet/dist/leaflet.css';import'./MapProspect.css';// Fix des ic√¥nes Leaflet\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',iconUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'});export default function MapProspects(_ref){let{onSearch}=_ref;const mapRef=useRef(null);const mapInstance=useRef(null);const markersRef=useRef([]);const[data,setData]=useState([]);const[filteredData,setFilteredData]=useState([]);const[companyName,setCompanyName]=useState('');const[postalCode,setPostalCode]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[center,setCenter]=useState({lat:48.8566,lng:2.3522});const[filters,setFilters]=useState({radius:100,hasEmail:false,hasPhone:false});const[favorites,setFavorites]=useState(()=>{return new Set(JSON.parse(localStorage.getItem('favorites')||'[]'));});const[selectedCompany,setSelectedCompany]=useState(null);// Calcul distance (Haversine)\nconst calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371;const dLat=(lat2-lat1)*Math.PI/180;const dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;};const geocodePostal=async cp=>{try{var _json$features;const res=await fetch(\"https://api-adresse.data.gouv.fr/search/?q=\".concat(encodeURIComponent(cp),\"&limit=1\"));const json=await res.json();const feat=(_json$features=json.features)===null||_json$features===void 0?void 0:_json$features[0];if(!feat)return null;const[lon,lat]=feat.geometry.coordinates;return{lat,lng:lon};}catch(error){console.error('Erreur de g√©ocodage:',error);return null;}};// util pour extraire pr√©nom/nom √† partir de \"Pr√©nom Nom\"\nconst splitName=function(){let fullName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";const parts=fullName.trim().split(\" \");if(parts.length===1)return{firstname:parts[0],lastname:\"\"};const firstname=parts[0];const lastname=parts.slice(1).join(\" \");return{firstname,lastname};};// D√©tecte si l'input ressemble √† un code NAF (ex: 47.52, 47.52A, 47.52B)\nconst isNafInput=function(){let s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";if(!s||typeof s!=='string')return false;const cleaned=s.trim().toUpperCase();// Formats possibles: \"47.52\", \"47.52A\", \"4752\" (rare)\nif(/^\\d{2}[.,]?\\d{2}[A-Z]?$/.test(cleaned))return true;if(/^NAF[:\\s]*\\d{2}[.,]?\\d{2}[A-Z]?$/.test(cleaned))return true;return false;};// util pour extraire le domaine d'une URL\nconst getDomainFromUrl=function(){let url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";if(!url)return\"\";try{const u=new URL(url.startsWith(\"http\")?url:\"https://\".concat(url));return u.hostname.replace(/^www\\./,\"\");}catch(_unused){return url.replace(/^https?:\\/\\//,\"\").replace(/^www\\./,\"\").split(\"/\")[0];}};// Appel de l'endpoint /enrich-contact pour un contact\nconst enrichContactWithFullEnrich=async(company,contact)=>{try{const{firstname,lastname}=splitName(contact.nom||contact.name||\"\");if(!firstname){alert(\"Impossible d'enrichir: le contact n'a pas de nom.\");return;}const domain=getDomainFromUrl(company.site);const res=await fetch(\"http://localhost:5000/enrich-contact\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({firstname,lastname,company_name:company.name,domain,linkedin_url:contact.linkedin||\"\"})});const data=await res.json();if(!res.ok){alert(data.error||\"Erreur FullEnrich\");console.error(\"FullEnrich error:\",data);return;}if(!data.data||data.data.length===0){alert(\"Aucune donn√©e suppl√©mentaire trouv√©e par FullEnrich.\");return;}const enriched=data.data[0];alert(\"Enrichi :\\n\"+\"Nom: \".concat(enriched.nom,\"\\n\")+\"Poste: \".concat(enriched.poste,\"\\n\")+\"Email: \".concat(enriched.email||\"N/A\",\"\\n\")+\"T\\xE9l\\xE9phone: \".concat(enriched.telephone||\"N/A\"));}catch(err){console.error(\"Erreur enrich-contact:\",err);alert(\"Erreur r√©seau FullEnrich\");}};// Manuel: lance l'enrichissement FullEnrich sur un nombre limit√© de contacts (√©vite boucle automatique)\nconst startAutoEnrich=async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;let enrichedCount=0;for(const company of data){if(!company||!company.contacts||company.contacts.length===0)continue;for(const contact of company.contacts){// n'enrichit que les contacts sans email ni t√©l√©phone pour limiter les appels\nconst hasEmail=contact.email&&contact.email.trim().length>0;const hasPhone=contact.telephone&&contact.telephone.toString().replace(/\\D/g,'').length>0;if(hasEmail||hasPhone)continue;if(enrichedCount>=limit)return;await enrichContactWithFullEnrich(company,contact);enrichedCount+=1;await new Promise(r=>setTimeout(r,400));}}};// Exporte les favoris en CSV\nconst exportFavoritesToCSV=()=>{if(!data||data.length===0||favorites.size===0){alert(\"Aucun favori √† exporter.\");return;}// R√©cup√®re les entreprises dont le siren est dans favorites\nconst favCompanies=data.filter(c=>favorites.has(c.siren));if(favCompanies.length===0){alert(\"Aucun favori √† exporter.\");return;}// Colonnes de ton CSV\nconst headers=[\"SIREN\",\"Nom\",\"Adresse\",\"Code postal\",\"Ville\",\"NAF\",\"Secteur\",\"Site web\",\"T√©l√©phone\",\"Nb contacts\",\"Emails contacts\"];const rows=favCompanies.map(c=>{const contactEmails=(c.contacts||[]).map(ct=>ct.email).filter(Boolean).join(\" | \");return[c.siren||\"\",c.name||\"\",c.adresse||c.address||\"\",c.code_postal||\"\",c.ville||\"\",c.naf||\"\",c.sector||\"\",c.site||\"\",c.telephone||\"\",(c.contacts||[]).length.toString(),contactEmails];});// Construire le CSV\nconst csvContent=[headers,...rows].map(row=>row.map(value=>{const v=(value!==null&&value!==void 0?value:\"\").toString().replace(/\"/g,'\"\"');return\"\\\"\".concat(v,\"\\\"\");}).join(\";\")).join(\"\\n\");const blob=new Blob([csvContent],{type:\"text/csv;charset=utf-8;\"});const url=URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;const date=new Date().toISOString().slice(0,10);link.download=\"prospects_favoris_\".concat(date,\".csv\");link.click();URL.revokeObjectURL(url);};// FONCTION DE RECHERCHE UNIFI√âE\nconst handleSearch=async e=>{if(e)e.preventDefault();if(!companyName||!postalCode){setError('Nom et code postal requis');return;}setLoading(true);setError(null);try{// 1. G√âOCODAGE D'ABORD pour avoir un centre pr√©cis\nconst centerFromCp=await geocodePostal(postalCode);if(!centerFromCp){setError('Code postal introuvable');setLoading(false);return;}setCenter(centerFromCp);// 2. Appel backend\n// Si l'utilisateur a entr√© un code NAF dans le champ principal, on l'envoie\nconst nafValue=isNafInput(companyName)?companyName.trim().toUpperCase().replace(',','.'):null;const res=await fetch('http://localhost:5000/prospect',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({companyName:isNafInput(companyName)?'':companyName,nafCode:nafValue,postalCode,radiusKm:filters.radius||100})});const text=await res.text();let js=null;try{js=text?JSON.parse(text):null;}catch(parseErr){setError(\"R\\xE9ponse inattendue du serveur (status \".concat(res.status,\")\"));setLoading(false);return;}if(!res.ok){var _js;setError(((_js=js)===null||_js===void 0?void 0:_js.error)||\"Erreur serveur (\".concat(res.status,\")\"));setLoading(false);return;}// util pour extraire pr√©nom/nom √† partir de \"Pr√©nom Nom\"\n// 3. Mapping des entreprises\nconst companies=(js.data||[]).map((c,i)=>({id:i,name:c.nom||c.nom_entreprise||\"Inconnu\",address:c.adresse||c.adresse_siege||\"\",sector:c.secteur||c.libelle_activite_principale||c.libelle_naf||\"\",site:c.site_web||c.site||\"\",telephone:c.telephone||\"\",// Les contacts sont d√©j√† limit√©s et trait√©s par le backend (pas besoin de processContacts ici)\ncontacts:c.contacts||[],latitude:c.latitude||c.lat||null,longitude:c.longitude||c.lng||null,ville:c.ville||\"\",code_postal:c.code_postal||\"\",adresse:c.adresse||\"\",naf:c.naf||c.activite_principale||\"\",siren:c.siren||\"temp-\".concat(i)}));// Option : lancer FullEnrich automatiquement sur chaque contact\nconst autoEnrich=async()=>{for(const company of companies){if(!company.site||!company.contacts||company.contacts.length===0)continue;for(const contact of company.contacts){// tu peux mettre des conditions si tu veux √©viter de tout enrichir\n// ex : si pas d'email ou pas de t√©l√©phone\n// if (contact.email && contact.telephone) continue;\nawait enrichContactWithFullEnrich(company,contact);// √©ventuellement un petit d√©lai pour ne pas spammer l‚ÄôAPI\nawait new Promise(r=>setTimeout(r,300));}}};// Ne lance pas automatiquement l'enrichissement FullEnrich en frontend\n// (le backend s'en charge d√©j√† lors de la requ√™te /prospect)\nsetData(companies);// 4. FILTRAGE UNIFI√â avec toutes les conditions\nconst filtered=companies.filter(company=>{// V√©rification des coordonn√©es\nconst lat=parseFloat(company.latitude);const lng=parseFloat(company.longitude);if(!lat||!lng||isNaN(lat)||isNaN(lng))return false;// Filtre distance\nconst distance=calculateDistance(centerFromCp.lat,centerFromCp.lng,lat,lng);if(distance>filters.radius)return false;// Filtre email\nif(filters.hasEmail&&(!company.contacts||!company.contacts.some(c=>c.email))){return false;}// Filtre t√©l√©phone\nif(filters.hasPhone&&!company.telephone&&(!company.contacts||!company.contacts.some(c=>c.telephone))){return false;}return true;});setFilteredData(filtered);// 5. Centrage de la carte sur le CP g√©ocod√©\nif(mapInstance.current){mapInstance.current.setView([centerFromCp.lat,centerFromCp.lng],11);}}catch(err){setError(err.message||'Erreur r√©seau');}finally{setLoading(false);}};// APPLY FILTERS - seulement pour les filtres appliqu√©s apr√®s la recherche\nconst applyFilters=()=>{if(data.length===0){setFilteredData([]);return;}const filtered=data.filter(company=>{const lat=parseFloat(company.latitude);const lng=parseFloat(company.longitude);if(!lat||!lng)return false;// Filtre distance (utilise le centre actuel)\nconst distance=calculateDistance(center.lat,center.lng,lat,lng);if(distance>filters.radius)return false;// Filtre email\nif(filters.hasEmail&&(!company.contacts||!company.contacts.some(c=>c.email))){return false;}// Filtre t√©l√©phone\nif(filters.hasPhone&&!company.telephone&&(!company.contacts||!company.contacts.some(c=>c.telephone))){return false;}return true;});setFilteredData(filtered);};// Applique les filtres quand ils changent\nuseEffect(()=>{if(data.length>0){applyFilters();}},[filters,center]);// Initialise la carte Leaflet\nuseEffect(()=>{if(!mapRef.current||mapInstance.current)return;mapInstance.current=L.map(mapRef.current).setView([center.lat,center.lng],6);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap contributors',maxZoom:19}).addTo(mapInstance.current);// Nettoyage\nreturn()=>{if(mapInstance.current){mapInstance.current.remove();mapInstance.current=null;}};},[]);// Cr√©e les markers\nuseEffect(()=>{if(!mapInstance.current)return;// Nettoie anciens markers\nmarkersRef.current.forEach(m=>mapInstance.current.removeLayer(m));markersRef.current=[];if(filteredData.length===0)return;const bounds=[];const seenAddresses=new Map();filteredData.forEach(company=>{const lat=parseFloat(company.latitude);const lng=parseFloat(company.longitude);if(!lat||!lng||isNaN(lat)||isNaN(lng))return;// D√©duplication\nconst addressKey=\"\".concat(lat.toFixed(4),\",\").concat(lng.toFixed(4));if(seenAddresses.has(addressKey))return;seenAddresses.set(addressKey,true);// Ic√¥ne personnalis√©e selon la charte graphique\nconst hasContacts=company.contacts&&company.contacts.length>0;const isFavorite=favorites.has(company.siren);// Couleurs selon la charte graphique\nlet iconColor,textColor,symbol;if(isFavorite){iconColor='#00FF89';// Vert pour les favoris\ntextColor='#000000';// Texte noir sur fond vert\nsymbol='‚òÖ';}else if(hasContacts){iconColor='#000000';// Noir pour les entreprises avec contacts\ntextColor='#00FF89';// Texte vert sur fond noir\nsymbol='E';}else{iconColor='#000000';// Noir pour les entreprises sans contacts\ntextColor='#FFFFFF';// Texte blanc sur fond noir\nsymbol='!';}const iconSize=isFavorite?32:24;const borderWidth=isFavorite?3:2;const customIcon=L.divIcon({className:'custom-leaflet-marker',html:\"\\n            <div style=\\\"\\n            background: \".concat(iconColor,\";\\n            width: \").concat(iconSize,\"px;\\n            height: \").concat(iconSize,\"px;\\n            border-radius: 0;\\n            border: \").concat(borderWidth,\"px solid #000000;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            font-family: 'DM Mono', monospace;\\n            font-weight: 500;\\n            color: \").concat(textColor,\";\\n            font-size: \").concat(iconSize*0.5,\"px;\\n            line-height: 1;\\n            transform: translate(-50%, -50%);\\n            \\\">\\n            \").concat(symbol,\"\\n            </div>\\n        \"),iconSize:[iconSize,iconSize],iconAnchor:[iconSize/2,iconSize/2],popupAnchor:[0,-iconSize/2]});const marker=L.marker([lat,lng],{icon:customIcon}).addTo(mapInstance.current).bindPopup(()=>createPopupContent(company)).on('click',()=>setSelectedCompany(company.siren));markersRef.current.push(marker);bounds.push([lat,lng]);});// Ajuste le zoom\nif(bounds.length>0){mapInstance.current.fitBounds(bounds,{padding:[50,50]});}},[filteredData,favorites]);// Popup personnalis√©e COMPACTE\nconst createPopupContent=company=>{const popupContainer=document.createElement('div');popupContainer.className='leaflet-popup-content-custom';const renderPopupContent=()=>{return\"\\n        <div class=\\\"compact-popup\\\">\\n            <h3 class=\\\"popup-title\\\">\".concat(company.name||company.nom||'Entreprise',\"</h3>\\n            \\n            <div class=\\\"popup-section\\\">\\n            <strong>\\uD83D\\uDCCD</strong> \").concat(company.address||company.adresse||'',\" \").concat(company.code_postal||'',\" \").concat(company.ville||'',\"\\n            </div>\\n            \\n            <div class=\\\"popup-section\\\">\\n            <strong>\\uD83C\\uDFE2</strong> \").concat(company.sector||company.secteur||'Non renseign√©',\"\\n            </div>\\n            \\n            \").concat(company.site||company.site_web?\"\\n            <div class=\\\"popup-section\\\">\\n                <strong>\\uD83C\\uDF10</strong> \\n                <a href=\\\"\".concat(company.site||company.site_web,\"\\\" target=\\\"_blank\\\" class=\\\"popup-link\\\">\\n                Site web\\n                </a>\\n            </div>\\n            \"):'',\"\\n            \\n            \").concat(company.telephone?\"\\n            <div class=\\\"popup-section\\\">\\n                <strong>\\uD83D\\uDCDE</strong> \\n                <a href=\\\"tel:\".concat(company.telephone,\"\\\" class=\\\"popup-link\\\">\\n                \").concat(company.telephone,\" (Standard - \").concat(company.ville||'Entreprise',\")\\n                </a>\\n            </div>\\n            \"):'',\"\\n            \\n            <!-- SECTION CONTACTS COMPACTE -->\\n            <div class=\\\"contacts-section\\\">\\n            \").concat(company.contacts&&company.contacts.length>0?\"\\n                <div class=\\\"contacts-dropdown\\\">\\n                <label for=\\\"contact-select-\".concat(company.siren,\"\\\">\\n                    <strong>\\uD83D\\uDC65 Contacts (\").concat(company.contacts.length,\")</strong>\\n                </label>\\n                <select \\n                    id=\\\"contact-select-\").concat(company.siren,\"\\\" \\n                    class=\\\"contact-select\\\"\\n                    onchange=\\\"handleContactSelect(this, '\").concat(company.siren,\"')\\\"\\n                >\\n                    <option value=\\\"\\\">S\\xE9lectionner un contact</option>\\n                    \").concat(company.contacts.map((contact,index)=>\"\\n                    <option value=\\\"\".concat(index,\"\\\" data-contact='\").concat(JSON.stringify(contact).replace(/'/g,\"&#39;\"),\"'>\\n                        \").concat(contact.nom,\" - \").concat(contact.poste,\"\\n                    </option>\\n                    \")).join(''),\"\\n                </select>\\n                \\n                <div id=\\\"contact-details-\").concat(company.siren,\"\\\" class=\\\"contact-details\\\"></div>\\n                </div>\\n            \"):'<div class=\"no-contacts\">Aucun contact</div>',\"\\n            </div>\\n        </div>\\n        \");};popupContainer.innerHTML=renderPopupContent();// Attendre que le DOM soit mis √† jour avant d'ajouter les √©couteurs\nsetTimeout(()=>{// Fonction pour g√©rer la s√©lection des contacts\nwindow.handleContactSelect=function(selectElement,siren){const selectedIndex=selectElement.value;const detailsDiv=document.getElementById(\"contact-details-\".concat(siren));if(selectedIndex&&selectedIndex!==''){const option=selectElement.options[selectElement.selectedIndex];const contact=JSON.parse(option.getAttribute('data-contact').replace(/&#39;/g,\"'\"));detailsDiv.innerHTML=\"\\n            <div class=\\\"selected-contact\\\">\\n              <div class=\\\"contact-header\\\">\\n                <strong>\".concat(contact.nom,\"</strong>\\n                <span class=\\\"confidence-badge \").concat(contact.confidence,\"\\\">\\n                  \").concat(contact.confidence==='high'?'√âlev√©e':contact.confidence==='medium'?'Moyenne':'Faible',\"\\n                </span>\\n              </div>\\n              <div class=\\\"contact-info\\\">\").concat(contact.poste,\"</div>\\n              \").concat(contact.email?\"\\n                <div class=\\\"contact-action\\\">\\n                  <a href=\\\"mailto:\".concat(contact.email,\"\\\" class=\\\"btn-email\\\" target=\\\"_blank\\\">\\n                    \\uD83D\\uDCE7 \").concat(contact.email,\"\\n                  </a>\\n                </div>\\n              \"):'',\"\\n              \").concat(contact.telephone?\"\\n                <div class=\\\"contact-action\\\">\\n                  <a href=\\\"tel:\".concat(contact.telephone,\"\\\" class=\\\"btn-call\\\">\\n                    \\uD83D\\uDCDE \").concat(contact.telephone,\"\\n                  </a>\\n                </div>\\n              \"):'',\"\\n              \").concat(contact.linkedin?\"\\n                <div class=\\\"contact-action\\\">\\n                  <a href=\\\"\".concat(contact.linkedin,\"\\\" class=\\\"btn-linkedin\\\" target=\\\"_blank\\\">\\n                    \\uD83D\\uDD17 LinkedIn\\n                  </a>\\n                </div>\\n              \"):'',\"\\n              <div class=\\\"contact-source\\\">Source: \").concat(contact.source,\"</div>\\n            </div>\\n          \");detailsDiv.style.display='block';}else{detailsDiv.style.display='none';}};},100);return popupContainer;};// Toggle favoris\nconst toggleFavorite=siren=>{const newFavorites=new Set(favorites);if(newFavorites.has(siren)){newFavorites.delete(siren);}else{newFavorites.add(siren);}setFavorites(newFavorites);localStorage.setItem('favorites',JSON.stringify([...newFavorites]));};const focusOnCompany=company=>{if(!company||!mapInstance.current)return;const lat=parseFloat(company.latitude);const lng=parseFloat(company.longitude);if(!lat||!lng||isNaN(lat)||isNaN(lng))return;setTimeout(()=>{mapInstance.current.options.zoomAnimation=false;mapInstance.current.setView([lat,lng],15);setTimeout(()=>{mapInstance.current.options.zoomAnimation=true;const companyMarker=markersRef.current.find(marker=>{const markerLatLng=marker.getLatLng();const latDiff=Math.abs(markerLatLng.lat-lat);const lngDiff=Math.abs(markerLatLng.lng-lng);return latDiff<0.0001&&lngDiff<0.0001;});if(companyMarker){markersRef.current.forEach(marker=>{if(marker!==companyMarker&&marker.isPopupOpen()){marker.closePopup();}});setTimeout(()=>{companyMarker.openPopup();},100);}},50);},500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"prospect-layout\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"sidebar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"SalesPropstect\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"panel-content\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"div\",{id:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"search-input\",type:\"text\",placeholder:\"Ex: Castorama ou 47.52A (NAF)\",value:companyName,onChange:e=>setCompanyName(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{id:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{id:\"search-input\",type:\"text\",placeholder:\"Ex: 75015\",value:postalCode,onChange:e=>setPostalCode(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{id:\"association-distance-filter\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"capacity-filter-title\",children:[\"Rayon de recherche : \",filters.radius,\" km\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"capacity-filter-controls\",children:/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"500\",value:filters.radius,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{radius:parseInt(e.target.value,10)})),className:\"capacity-range\",id:\"distance-slider\",style:{\"--progress\":\"\".concat(filters.radius/500*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"slider-labels\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"1 km\"}),/*#__PURE__*/_jsx(\"span\",{children:\"500 km\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'8px'},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",disabled:loading,children:loading?\"üîÑ Recherche...\":\"Rechercher\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-toggle-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"filter-toggle-label\",htmlFor:\"toggle-email\",children:\"Avec email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"toggle-email\",className:\"filter-toggle-radio\",checked:!!filters.hasEmail,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{hasEmail:e.target.checked}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-toggle-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"filter-toggle-label\",htmlFor:\"toggle-phone\",children:\"Avec t\\xE9l\\xE9phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"toggle-phone\",className:\"filter-toggle-radio\",checked:!!filters.hasPhone,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{hasPhone:e.target.checked}))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"export-csv-button\",onClick:exportFavoritesToCSV,children:\"Exporter les favoris en CSV\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-list\",children:[filteredData.length===0&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"no-results\",children:\"Aucune entreprise trouv\\xE9e\"}),filteredData.sort((a,b)=>{const aIsFavorite=favorites.has(a.siren);const bIsFavorite=favorites.has(b.siren);if(aIsFavorite&&!bIsFavorite)return-1;if(!aIsFavorite&&bIsFavorite)return 1;return 0;}).map((company,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-card\".concat(selectedCompany===company.siren?\" selected\":\"\").concat(favorites.has(company.siren)?\" favori\":\"\"),onClick:()=>{setSelectedCompany(company.siren);focusOnCompany(company);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-title\",children:company.name||company.nom}),/*#__PURE__*/_jsx(\"button\",{className:\"favorite-btn\",type:\"button\",onClick:e=>{e.stopPropagation();toggleFavorite(company.siren);},children:favorites.has(company.siren)?\"‚òÖ\":\"‚òÜ\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",company.ville]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDFE2 \",company.sector||company.secteur]}),company.contacts&&company.contacts.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"contact-summary\",children:\"\\uD83D\\uDC65 Contacts disponibles\"}),company.telephone&&/*#__PURE__*/_jsxs(\"div\",{className:\"company-direct-phone\",children:[\"\\uD83D\\uDCDE\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(company.telephone),onClick:e=>e.stopPropagation(),children:company.telephone})]})]})]},i))]})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapRef})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapProspects","_ref","onSearch","mapRef","mapInstance","markersRef","data","setData","filteredData","setFilteredData","companyName","setCompanyName","postalCode","setPostalCode","loading","setLoading","error","setError","center","setCenter","lat","lng","filters","setFilters","radius","hasEmail","hasPhone","favorites","setFavorites","Set","JSON","parse","localStorage","getItem","selectedCompany","setSelectedCompany","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","a","sin","cos","c","atan2","sqrt","geocodePostal","cp","_json$features","res","fetch","concat","encodeURIComponent","json","feat","features","lon","geometry","coordinates","console","splitName","fullName","arguments","length","undefined","parts","trim","split","firstname","lastname","slice","join","isNafInput","s","cleaned","toUpperCase","test","getDomainFromUrl","url","u","URL","startsWith","hostname","replace","_unused","enrichContactWithFullEnrich","company","contact","nom","name","alert","domain","site","method","headers","body","stringify","company_name","linkedin_url","linkedin","ok","enriched","poste","email","telephone","err","startAutoEnrich","limit","enrichedCount","contacts","toString","Promise","r","setTimeout","exportFavoritesToCSV","size","favCompanies","filter","has","siren","rows","map","contactEmails","ct","Boolean","adresse","address","code_postal","ville","naf","sector","csvContent","row","value","v","blob","Blob","type","createObjectURL","link","document","createElement","href","date","Date","toISOString","download","click","revokeObjectURL","handleSearch","e","preventDefault","centerFromCp","nafValue","nafCode","radiusKm","text","js","parseErr","status","_js","companies","i","id","nom_entreprise","adresse_siege","secteur","libelle_activite_principale","libelle_naf","site_web","latitude","longitude","activite_principale","autoEnrich","filtered","parseFloat","isNaN","distance","some","current","setView","message","applyFilters","tileLayer","attribution","maxZoom","addTo","remove","forEach","m","removeLayer","bounds","seenAddresses","Map","addressKey","toFixed","set","hasContacts","isFavorite","iconColor","textColor","symbol","iconSize","borderWidth","customIcon","divIcon","className","html","iconAnchor","popupAnchor","marker","icon","bindPopup","createPopupContent","on","push","fitBounds","padding","popupContainer","renderPopupContent","index","innerHTML","window","handleContactSelect","selectElement","selectedIndex","detailsDiv","getElementById","option","options","getAttribute","confidence","source","style","display","toggleFavorite","newFavorites","delete","add","setItem","focusOnCompany","zoomAnimation","companyMarker","find","markerLatLng","getLatLng","latDiff","abs","lngDiff","isPopupOpen","closePopup","openPopup","children","onSubmit","placeholder","onChange","target","min","max","_objectSpread","parseInt","gap","disabled","htmlFor","checked","onClick","sort","b","aIsFavorite","bIsFavorite","stopPropagation","ref"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport './MapProspect.css';\n\n// Fix des ic√¥nes Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n});\n\nexport default function MapProspects({ onSearch }) {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [companyName, setCompanyName] = useState('');\n  const [postalCode, setPostalCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [center, setCenter] = useState({ lat: 48.8566, lng: 2.3522 });\n  const [filters, setFilters] = useState({\n    radius: 100,\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n              Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  };\n\n  const geocodePostal = async (cp) => {\n    try {\n      const res = await fetch(\n        `https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(cp)}&limit=1`\n      );\n      const json = await res.json();\n      const feat = json.features?.[0];\n      if (!feat) return null;\n      const [lon, lat] = feat.geometry.coordinates;\n      return { lat, lng: lon };\n    } catch (error) {\n      console.error('Erreur de g√©ocodage:', error);\n      return null;\n    }\n  };\n\n  // util pour extraire pr√©nom/nom √† partir de \"Pr√©nom Nom\"\n      const splitName = (fullName = \"\") => {\n        const parts = fullName.trim().split(\" \");\n        if (parts.length === 1) return { firstname: parts[0], lastname: \"\" };\n        const firstname = parts[0];\n        const lastname = parts.slice(1).join(\" \");\n        return { firstname, lastname };\n      };\n\n      // D√©tecte si l'input ressemble √† un code NAF (ex: 47.52, 47.52A, 47.52B)\n      const isNafInput = (s = \"\") => {\n        if (!s || typeof s !== 'string') return false;\n        const cleaned = s.trim().toUpperCase();\n        // Formats possibles: \"47.52\", \"47.52A\", \"4752\" (rare)\n        if (/^\\d{2}[.,]?\\d{2}[A-Z]?$/.test(cleaned)) return true;\n        if (/^NAF[:\\s]*\\d{2}[.,]?\\d{2}[A-Z]?$/.test(cleaned)) return true;\n        return false;\n      };\n\n      // util pour extraire le domaine d'une URL\n      const getDomainFromUrl = (url = \"\") => {\n        if (!url) return \"\";\n        try {\n          const u = new URL(url.startsWith(\"http\") ? url : `https://${url}`);\n          return u.hostname.replace(/^www\\./, \"\");\n        } catch {\n          return url.replace(/^https?:\\/\\//, \"\").replace(/^www\\./, \"\").split(\"/\")[0];\n        }\n      };\n\n      // Appel de l'endpoint /enrich-contact pour un contact\n      const enrichContactWithFullEnrich = async (company, contact) => {\n        try {\n          const { firstname, lastname } = splitName(contact.nom || contact.name || \"\");\n          if (!firstname) {\n            alert(\"Impossible d'enrichir: le contact n'a pas de nom.\");\n            return;\n          }\n\n          const domain = getDomainFromUrl(company.site);\n\n          const res = await fetch(\"http://localhost:5000/enrich-contact\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              firstname,\n              lastname,\n              company_name: company.name,\n              domain,\n              linkedin_url: contact.linkedin || \"\"\n            })\n          });\n\n          const data = await res.json();\n\n          if (!res.ok) {\n            alert(data.error || \"Erreur FullEnrich\");\n            console.error(\"FullEnrich error:\", data);\n            return;\n          }\n\n          if (!data.data || data.data.length === 0) {\n            alert(\"Aucune donn√©e suppl√©mentaire trouv√©e par FullEnrich.\");\n            return;\n          }\n\n          const enriched = data.data[0];\n          alert(\n            `Enrichi :\\n` +\n            `Nom: ${enriched.nom}\\n` +\n            `Poste: ${enriched.poste}\\n` +\n            `Email: ${enriched.email || \"N/A\"}\\n` +\n            `T√©l√©phone: ${enriched.telephone || \"N/A\"}`\n          );\n        } catch (err) {\n          console.error(\"Erreur enrich-contact:\", err);\n          alert(\"Erreur r√©seau FullEnrich\");\n        }\n      };\n\n      // Manuel: lance l'enrichissement FullEnrich sur un nombre limit√© de contacts (√©vite boucle automatique)\n      const startAutoEnrich = async (limit = 8) => {\n        let enrichedCount = 0;\n        for (const company of data) {\n          if (!company || !company.contacts || company.contacts.length === 0) continue;\n\n          for (const contact of company.contacts) {\n            // n'enrichit que les contacts sans email ni t√©l√©phone pour limiter les appels\n            const hasEmail = contact.email && contact.email.trim().length > 0;\n            const hasPhone = contact.telephone && contact.telephone.toString().replace(/\\D/g,'').length > 0;\n            if (hasEmail || hasPhone) continue;\n\n            if (enrichedCount >= limit) return;\n            await enrichContactWithFullEnrich(company, contact);\n            enrichedCount += 1;\n            await new Promise(r => setTimeout(r, 400));\n          }\n        }\n      };\n\n      // Exporte les favoris en CSV\n      const exportFavoritesToCSV = () => {\n        if (!data || data.length === 0 || favorites.size === 0) {\n          alert(\"Aucun favori √† exporter.\");\n          return;\n        }\n\n        // R√©cup√®re les entreprises dont le siren est dans favorites\n        const favCompanies = data.filter(c => favorites.has(c.siren));\n\n        if (favCompanies.length === 0) {\n          alert(\"Aucun favori √† exporter.\");\n          return;\n        }\n\n        // Colonnes de ton CSV\n        const headers = [\n          \"SIREN\",\n          \"Nom\",\n          \"Adresse\",\n          \"Code postal\",\n          \"Ville\",\n          \"NAF\",\n          \"Secteur\",\n          \"Site web\",\n          \"T√©l√©phone\",\n          \"Nb contacts\",\n          \"Emails contacts\",\n        ];\n\n        const rows = favCompanies.map(c => {\n          const contactEmails = (c.contacts || [])\n            .map(ct => ct.email)\n            .filter(Boolean)\n            .join(\" | \");\n\n          return [\n            c.siren || \"\",\n            c.name || \"\",\n            c.adresse || c.address || \"\",\n            c.code_postal || \"\",\n            c.ville || \"\",\n            c.naf || \"\",\n            c.sector || \"\",\n            c.site || \"\",\n            c.telephone || \"\",\n            (c.contacts || []).length.toString(),\n            contactEmails,\n          ];\n        });\n\n        // Construire le CSV\n        const csvContent =\n          [headers, ...rows]\n            .map(row =>\n              row\n                .map(value => {\n                  const v = (value ?? \"\").toString().replace(/\"/g, '\"\"');\n                  return `\"${v}\"`;\n                })\n                .join(\";\")\n            )\n            .join(\"\\n\");\n\n        const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n        const url = URL.createObjectURL(blob);\n\n        const link = document.createElement(\"a\");\n        link.href = url;\n        const date = new Date().toISOString().slice(0, 10);\n        link.download = `prospects_favoris_${date}.csv`;\n        link.click();\n\n        URL.revokeObjectURL(url);\n      };\n\n\n\n  // FONCTION DE RECHERCHE UNIFI√âE\n  const handleSearch = async (e) => {\n    if (e) e.preventDefault();\n\n    if (!companyName || !postalCode) {\n      setError('Nom et code postal requis');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // 1. G√âOCODAGE D'ABORD pour avoir un centre pr√©cis\n      const centerFromCp = await geocodePostal(postalCode);\n      if (!centerFromCp) {\n        setError('Code postal introuvable');\n        setLoading(false);\n        return;\n      }\n      \n      setCenter(centerFromCp);\n\n      // 2. Appel backend\n      // Si l'utilisateur a entr√© un code NAF dans le champ principal, on l'envoie\n      const nafValue = isNafInput(companyName) ? companyName.trim().toUpperCase().replace(',', '.') : null;\n\n      const res = await fetch('http://localhost:5000/prospect', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          companyName: isNafInput(companyName) ? '' : companyName,\n          nafCode: nafValue,\n          postalCode,\n          radiusKm: filters.radius || 100,\n        }),\n      });\n\n      const text = await res.text();\n      let js = null;\n      try {\n        js = text ? JSON.parse(text) : null;\n      } catch (parseErr) {\n        setError(`R√©ponse inattendue du serveur (status ${res.status})`);\n        setLoading(false);\n        return;\n      }\n\n      if (!res.ok) {\n        setError(js?.error || `Erreur serveur (${res.status})`);\n        setLoading(false);\n        return;\n      }\n\n      // util pour extraire pr√©nom/nom √† partir de \"Pr√©nom Nom\"\n\n\n      // 3. Mapping des entreprises\n      const companies = (js.data || []).map((c, i) => ({\n        id: i,\n        name: c.nom || c.nom_entreprise || \"Inconnu\",\n        address: c.adresse || c.adresse_siege || \"\",\n        sector: c.secteur || c.libelle_activite_principale || c.libelle_naf || \"\",\n        site: c.site_web || c.site || \"\",\n        telephone: c.telephone || \"\",\n        // Les contacts sont d√©j√† limit√©s et trait√©s par le backend (pas besoin de processContacts ici)\n        contacts: c.contacts || [],\n        latitude: c.latitude || c.lat || null,\n        longitude: c.longitude || c.lng || null,\n        ville: c.ville || \"\",\n        code_postal: c.code_postal || \"\",\n        adresse: c.adresse || \"\",\n        naf: c.naf || c.activite_principale || \"\",\n        siren: c.siren || `temp-${i}`,\n      }));\n\n      // Option : lancer FullEnrich automatiquement sur chaque contact\n      const autoEnrich = async () => {\n        for (const company of companies) {\n          if (!company.site || !company.contacts || company.contacts.length === 0) continue;\n\n          for (const contact of company.contacts) {\n            // tu peux mettre des conditions si tu veux √©viter de tout enrichir\n            // ex : si pas d'email ou pas de t√©l√©phone\n            // if (contact.email && contact.telephone) continue;\n\n            await enrichContactWithFullEnrich(company, contact);\n            // √©ventuellement un petit d√©lai pour ne pas spammer l‚ÄôAPI\n            await new Promise(r => setTimeout(r, 300));\n          }\n        }\n      };\n\n      // Ne lance pas automatiquement l'enrichissement FullEnrich en frontend\n      // (le backend s'en charge d√©j√† lors de la requ√™te /prospect)\n\n      setData(companies);\n\n      // 4. FILTRAGE UNIFI√â avec toutes les conditions\n      const filtered = companies.filter(company => {\n        // V√©rification des coordonn√©es\n        const lat = parseFloat(company.latitude);\n        const lng = parseFloat(company.longitude);\n        if (!lat || !lng || isNaN(lat) || isNaN(lng)) return false;\n\n        // Filtre distance\n        const distance = calculateDistance(centerFromCp.lat, centerFromCp.lng, lat, lng);\n        if (distance > filters.radius) return false;\n\n        // Filtre email\n        if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n          return false;\n        }\n\n        // Filtre t√©l√©phone\n        if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n          return false;\n        }\n\n        return true;\n      });\n\n      setFilteredData(filtered);\n\n      // 5. Centrage de la carte sur le CP g√©ocod√©\n      if (mapInstance.current) {\n        mapInstance.current.setView([centerFromCp.lat, centerFromCp.lng], 11);\n      }\n\n    } catch (err) {\n      setError(err.message || 'Erreur r√©seau');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // APPLY FILTERS - seulement pour les filtres appliqu√©s apr√®s la recherche\n  const applyFilters = () => {\n    if (data.length === 0) {\n      setFilteredData([]);\n      return;\n    }\n\n    const filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      \n      if (!lat || !lng) return false;\n\n      // Filtre distance (utilise le centre actuel)\n      const distance = calculateDistance(center.lat, center.lng, lat, lng);\n      if (distance > filters.radius) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n\n      return true;\n    });\n\n    setFilteredData(filtered);\n  };\n\n  // Applique les filtres quand ils changent\n  useEffect(() => {\n    if (data.length > 0) {\n      applyFilters();\n    }\n  }, [filters, center]);\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 6);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n\n    // Nettoyage\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.remove();\n        mapInstance.current = null;\n      }\n    };\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n\n    if (filteredData.length === 0) return;\n\n    const bounds = [];\n    const seenAddresses = new Map();\n\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e selon la charte graphique\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      \n      // Couleurs selon la charte graphique\n      let iconColor, textColor, symbol;\n      \n      if (isFavorite) {\n        iconColor = '#00FF89'; // Vert pour les favoris\n        textColor = '#000000'; // Texte noir sur fond vert\n        symbol = '‚òÖ';\n      } else if (hasContacts) {\n        iconColor = '#000000'; // Noir pour les entreprises avec contacts\n        textColor = '#00FF89'; // Texte vert sur fond noir\n        symbol = 'E';\n      } else {\n        iconColor = '#000000'; // Noir pour les entreprises sans contacts\n        textColor = '#FFFFFF'; // Texte blanc sur fond noir\n        symbol = '!';\n      }\n\n      const iconSize = isFavorite ? 32 : 24;\n      const borderWidth = isFavorite ? 3 : 2;\n\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `\n            <div style=\"\n            background: ${iconColor};\n            width: ${iconSize}px;\n            height: ${iconSize}px;\n            border-radius: 0;\n            border: ${borderWidth}px solid #000000;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-family: 'DM Mono', monospace;\n            font-weight: 500;\n            color: ${textColor};\n            font-size: ${iconSize * 0.5}px;\n            line-height: 1;\n            transform: translate(-50%, -50%);\n            \">\n            ${symbol}\n            </div>\n        `,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize/2, iconSize/2],\n        popupAnchor: [0, -iconSize/2]\n        });\n\n      const marker = L.marker([lat, lng], { icon: customIcon })\n        .addTo(mapInstance.current)\n        .bindPopup(() => createPopupContent(company))\n        .on('click', () => setSelectedCompany(company.siren));\n\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [filteredData, favorites]);\n\n\n\n   \n  // Popup personnalis√©e COMPACTE\n  const createPopupContent = (company) => {\n    const popupContainer = document.createElement('div');\n    popupContainer.className = 'leaflet-popup-content-custom';\n    \n    const renderPopupContent = () => {\n        return `\n        <div class=\"compact-popup\">\n            <h3 class=\"popup-title\">${company.name || company.nom || 'Entreprise'}</h3>\n            \n            <div class=\"popup-section\">\n            <strong>üìç</strong> ${company.address || company.adresse || ''} ${company.code_postal || ''} ${company.ville || ''}\n            </div>\n            \n            <div class=\"popup-section\">\n            <strong>üè¢</strong> ${company.sector || company.secteur || 'Non renseign√©'}\n            </div>\n            \n            ${company.site || company.site_web ? `\n            <div class=\"popup-section\">\n                <strong>üåê</strong> \n                <a href=\"${company.site || company.site_web}\" target=\"_blank\" class=\"popup-link\">\n                Site web\n                </a>\n            </div>\n            ` : ''}\n            \n            ${company.telephone ? `\n            <div class=\"popup-section\">\n                <strong>üìû</strong> \n                <a href=\"tel:${company.telephone}\" class=\"popup-link\">\n                ${company.telephone} (Standard - ${company.ville || 'Entreprise'})\n                </a>\n            </div>\n            ` : ''}\n            \n            <!-- SECTION CONTACTS COMPACTE -->\n            <div class=\"contacts-section\">\n            ${company.contacts && company.contacts.length > 0 ? `\n                <div class=\"contacts-dropdown\">\n                <label for=\"contact-select-${company.siren}\">\n                    <strong>üë• Contacts (${company.contacts.length})</strong>\n                </label>\n                <select \n                    id=\"contact-select-${company.siren}\" \n                    class=\"contact-select\"\n                    onchange=\"handleContactSelect(this, '${company.siren}')\"\n                >\n                    <option value=\"\">S√©lectionner un contact</option>\n                    ${company.contacts.map((contact, index) => `\n                    <option value=\"${index}\" data-contact='${JSON.stringify(contact).replace(/'/g, \"&#39;\")}'>\n                        ${contact.nom} - ${contact.poste}\n                    </option>\n                    `).join('')}\n                </select>\n                \n                <div id=\"contact-details-${company.siren}\" class=\"contact-details\"></div>\n                </div>\n            ` : '<div class=\"no-contacts\">Aucun contact</div>'}\n            </div>\n        </div>\n        `;\n    };\n    popupContainer.innerHTML = renderPopupContent();\n\n    // Attendre que le DOM soit mis √† jour avant d'ajouter les √©couteurs\n    setTimeout(() => {\n      // Fonction pour g√©rer la s√©lection des contacts\n      window.handleContactSelect = function(selectElement, siren) {\n        const selectedIndex = selectElement.value;\n        const detailsDiv = document.getElementById(`contact-details-${siren}`);\n        \n        if (selectedIndex && selectedIndex !== '') {\n          const option = selectElement.options[selectElement.selectedIndex];\n          const contact = JSON.parse(option.getAttribute('data-contact').replace(/&#39;/g, \"'\"));\n          \n          detailsDiv.innerHTML = `\n            <div class=\"selected-contact\">\n              <div class=\"contact-header\">\n                <strong>${contact.nom}</strong>\n                <span class=\"confidence-badge ${contact.confidence}\">\n                  ${contact.confidence === 'high' ? '√âlev√©e' : contact.confidence === 'medium' ? 'Moyenne' : 'Faible'}\n                </span>\n              </div>\n              <div class=\"contact-info\">${contact.poste}</div>\n              ${contact.email ? `\n                <div class=\"contact-action\">\n                  <a href=\"mailto:${contact.email}\" class=\"btn-email\" target=\"_blank\">\n                    üìß ${contact.email}\n                  </a>\n                </div>\n              ` : ''}\n              ${contact.telephone ? `\n                <div class=\"contact-action\">\n                  <a href=\"tel:${contact.telephone}\" class=\"btn-call\">\n                    üìû ${contact.telephone}\n                  </a>\n                </div>\n              ` : ''}\n              ${contact.linkedin ? `\n                <div class=\"contact-action\">\n                  <a href=\"${contact.linkedin}\" class=\"btn-linkedin\" target=\"_blank\">\n                    üîó LinkedIn\n                  </a>\n                </div>\n              ` : ''}\n              <div class=\"contact-source\">Source: ${contact.source}</div>\n            </div>\n          `;\n          detailsDiv.style.display = 'block';\n        } else {\n          detailsDiv.style.display = 'none';\n        }\n      };\n    }, 100);\n\n    return popupContainer;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = (siren) => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n\n  const focusOnCompany = (company) => {\n    if (!company || !mapInstance.current) return;\n\n    const lat = parseFloat(company.latitude);\n    const lng = parseFloat(company.longitude);\n    \n    if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n    setTimeout(() => {\n      mapInstance.current.options.zoomAnimation = false;\n      mapInstance.current.setView([lat, lng], 15);\n      \n      setTimeout(() => {\n        mapInstance.current.options.zoomAnimation = true;\n        \n        const companyMarker = markersRef.current.find(marker => {\n          const markerLatLng = marker.getLatLng();\n          const latDiff = Math.abs(markerLatLng.lat - lat);\n          const lngDiff = Math.abs(markerLatLng.lng - lng);\n          return latDiff < 0.0001 && lngDiff < 0.0001;\n        });\n\n        if (companyMarker) {\n          markersRef.current.forEach(marker => {\n            if (marker !== companyMarker && marker.isPopupOpen()) {\n              marker.closePopup();\n            }\n          });\n          \n          setTimeout(() => {\n            companyMarker.openPopup();\n          }, 100);\n        }\n      }, 50);\n    }, 500);\n  };\n\n  return (\n    <div className=\"prospect-layout\">\n      {/* Sidebar principal */}\n      <div id=\"sidebar\">\n        <div className=\"sidebar-center\">\n          {/* Titre de section */}\n          <h2 className=\"section-title\">SalesPropstect</h2>\n\n          {/* Formulaire de recherche */}\n          <form className=\"panel-content\" onSubmit={handleSearch}>\n            <div id=\"search-container\">\n              <input\n                id=\"search-input\"\n                type=\"text\"\n                placeholder=\"Ex: Castorama ou 47.52A (NAF)\"\n                value={companyName}\n                onChange={(e) => setCompanyName(e.target.value)}\n              />\n            </div>\n            <div id=\"search-container\">\n              <input\n                id=\"search-input\"\n                type=\"text\"\n                placeholder=\"Ex: 75015\"\n                value={postalCode}\n                onChange={(e) => setPostalCode(e.target.value)}\n              />\n            </div>\n\n            {/* Filtre rayon avec slider */}\n            <div id=\"association-distance-filter\">\n              <div className=\"capacity-filter-title\">\n                Rayon de recherche : {filters.radius} km\n              </div>\n              <div className=\"capacity-filter-controls\">\n                <input\n                  type=\"range\"\n                  min=\"1\"\n                  max=\"500\"\n                  value={filters.radius}\n                  onChange={(e) =>\n                    setFilters({\n                      ...filters,\n                      radius: parseInt(e.target.value, 10),\n                    })\n                  }\n                  className=\"capacity-range\"\n                  id=\"distance-slider\"\n                  style={{\n                    \"--progress\": `${(filters.radius / 500) * 100}%`,\n                  }}\n                />\n              </div>\n              <div className=\"slider-labels\">\n                <span>1 km</span>\n                <span>500 km</span>\n              </div>\n            </div>\n\n            <div style={{ display: 'flex', gap: '8px' }}>\n              <button className=\"btn btn-primary\" type=\"submit\" disabled={loading}>\n                {loading ? \"üîÑ Recherche...\" : \"Rechercher\"}\n              </button>\n            </div>\n          </form>\n\n          {error && <div className=\"error-message\">{error}</div>}\n\n          {/* Filtres simplifi√©s */}\n          <div className=\"filters-section\">\n            <div className=\"filter-toggle-group\">\n              <label className=\"filter-toggle-label\" htmlFor=\"toggle-email\">\n                Avec email\n              </label>\n              <input\n                type=\"checkbox\"\n                id=\"toggle-email\"\n                className=\"filter-toggle-radio\"\n                checked={!!filters.hasEmail}\n                onChange={(e) =>\n                  setFilters({ ...filters, hasEmail: e.target.checked })\n                }\n              />\n            </div>\n\n            <div className=\"filter-toggle-group\">\n              <label className=\"filter-toggle-label\" htmlFor=\"toggle-phone\">\n                Avec t√©l√©phone\n              </label>\n              <input\n                type=\"checkbox\"\n                id=\"toggle-phone\"\n                className=\"filter-toggle-radio\"\n                checked={!!filters.hasPhone}\n                onChange={(e) =>\n                  setFilters({ ...filters, hasPhone: e.target.checked })\n                }\n              />\n            </div>\n\n            <button\n              type=\"button\"\n              className=\"export-csv-button\"\n              onClick={exportFavoritesToCSV}\n            >\n              Exporter les favoris en CSV\n            </button>\n\n          </div>\n\n          {/* Liste des entreprises */}\n          <div className=\"transaction-list\">\n            {filteredData.length === 0 && !loading && (\n              <div className=\"no-results\">Aucune entreprise trouv√©e</div>\n            )}\n\n            {filteredData\n              .sort((a, b) => {\n                const aIsFavorite = favorites.has(a.siren);\n                const bIsFavorite = favorites.has(b.siren);\n\n                if (aIsFavorite && !bIsFavorite) return -1;\n                if (!aIsFavorite && bIsFavorite) return 1;\n                return 0;\n              })\n              .map((company, i) => (\n                <div\n                  className={`transaction-card${\n                    selectedCompany === company.siren ? \" selected\" : \"\"\n                  }${favorites.has(company.siren) ? \" favori\" : \"\"}`}\n                  key={i}\n                  onClick={() => {\n                    setSelectedCompany(company.siren);\n                    focusOnCompany(company);\n                  }}\n                >\n                  <div className=\"transaction-header\">\n                    <span className=\"card-title\">\n                      {company.name || company.nom}\n                    </span>\n                    <button\n                      className=\"favorite-btn\"\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        toggleFavorite(company.siren);\n                      }}\n                    >\n                      {favorites.has(company.siren) ? \"‚òÖ\" : \"‚òÜ\"}\n                    </button>\n                  </div>\n\n                  <div className=\"card-details\">\n                    <div>üìç {company.ville}</div>\n                    <div>üè¢ {company.sector || company.secteur}</div>\n\n                    {/* Indication simple qu'il existe des contacts */}\n                    {company.contacts && company.contacts.length > 0 && (\n                      <div className=\"contact-summary\">\n                        üë• Contacts disponibles\n                      </div>\n                    )}\n\n                    {/* T√©l√©phone direct de l'entreprise si disponible */}\n                    {company.telephone && (\n                      <div className=\"company-direct-phone\">\n                        üìû{\" \"}\n                        <a\n                          href={`tel:${company.telephone}`}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          {company.telephone}\n                        </a>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Carte interactive */}\n      <div id=\"map\" ref={mapRef}></div>\n    </div>\n  );\n  }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}