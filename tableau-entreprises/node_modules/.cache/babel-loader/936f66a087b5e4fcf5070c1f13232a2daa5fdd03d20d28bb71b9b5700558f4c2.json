{"ast":null,"code":"var _jsxFileName = \"/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'\n});\nexport default function MapProspects({\n  onSearch\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [companyName, setCompanyName] = useState('');\n  const [postalCode, setPostalCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const center = {\n    lat: 48.8566,\n    lng: 2.3522\n  };\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Fonction de recherche\n  const handleSearch = async e => {\n    if (e) e.preventDefault();\n    if (!companyName || !postalCode) {\n      setError('Nom et code postal requis');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch('http://localhost:5000/prospect', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          companyName,\n          location: postalCode\n        })\n      });\n      const text = await res.text();\n      let js = null;\n      try {\n        js = text ? JSON.parse(text) : null;\n      } catch (parseErr) {\n        setError(`R√©ponse inattendue du serveur (status ${res.status})`);\n        setLoading(false);\n        return;\n      }\n      if (!res.ok) {\n        var _js;\n        setError(((_js = js) === null || _js === void 0 ? void 0 : _js.error) || `Erreur serveur (${res.status})`);\n        setLoading(false);\n        return;\n      }\n      const companies = (js.data || []).map((c, i) => ({\n        id: i,\n        name: c.nom || c.nom_entreprise || \"Inconnu\",\n        address: c.adresse || c.adresse_siege || \"\",\n        sector: c.secteur || c.libelle_naf || \"\",\n        site: c.site_web || c.site || \"\",\n        telephone: c.telephone || \"\",\n        contacts: c.contacts || [],\n        latitude: c.latitude || c.lat || null,\n        longitude: c.longitude || c.lng || null,\n        ville: c.ville || \"\",\n        code_postal: c.code_postal || \"\",\n        adresse: c.adresse || \"\",\n        naf: c.naf || \"\",\n        siren: c.siren || `temp-${i}`\n      }));\n      setData(companies);\n\n      // Centre la carte sur le premier r√©sultat\n      if (companies.length > 0 && companies[0].latitude && companies[0].longitude) {\n        const firstLat = parseFloat(companies[0].latitude);\n        const firstLng = parseFloat(companies[0].longitude);\n        if (mapInstance.current && !isNaN(firstLat) && !isNaN(firstLng)) {\n          mapInstance.current.setView([firstLat, firstLng], 12);\n        }\n      }\n    } catch (err) {\n      setError(err.message || 'Erreur r√©seau');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 6);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n    if (filteredData.length === 0) return;\n    const bounds = [];\n    const seenAddresses = new Map();\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      const iconColor = isFavorite ? '#f4b400' : hasContacts ? '#0f9d58' : '#db4437';\n      const iconSize = isFavorite ? 32 : 24;\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize / 2, iconSize / 2]\n      });\n      const marker = L.marker([lat, lng], {\n        icon: customIcon\n      }).addTo(mapInstance.current).bindPopup(() => createPopupContent(company)).on('click', () => setSelectedCompany(company.siren));\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, {\n        padding: [50, 50]\n      });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = company => {\n    const contactsHtml = company.contacts && company.contacts.length > 0 ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      ` : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  };\n\n  // Applique les filtres\n  const applyFilters = () => {\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      if (!lat || !lng) return false;\n\n      // Filtre rayon\n      const distance = calculateDistance(center.lat, center.lng, lat, lng);\n      if (distance > filters.radius) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n      return true;\n    });\n    setFilteredData(filtered);\n  };\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = siren => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '380px',\n        background: 'white',\n        borderRight: '1px solid #ddd',\n        overflowY: 'auto',\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          marginBottom: '16px',\n          fontSize: '20px'\n        },\n        children: \"\\uD83C\\uDFAF Prospection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '6px',\n              fontWeight: '500',\n              fontSize: '13px'\n            },\n            children: \"Nom entreprise\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ex: Castorama\",\n            value: companyName,\n            onChange: e => setCompanyName(e.target.value),\n            style: {\n              width: '100%',\n              padding: '10px',\n              borderRadius: '8px',\n              border: '1px solid #ddd',\n              fontSize: '14px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              marginBottom: '6px',\n              fontWeight: '500',\n              fontSize: '13px'\n            },\n            children: \"Code postal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Ex: 75015\",\n            value: postalCode,\n            onChange: e => setPostalCode(e.target.value),\n            style: {\n              width: '100%',\n              padding: '10px',\n              borderRadius: '8px',\n              border: '1px solid #ddd',\n              fontSize: '14px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: loading ? '#ccc' : '#1a73e8',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '15px',\n            fontWeight: '600',\n            cursor: loading ? 'not-allowed' : 'pointer',\n            transition: 'background 0.2s'\n          },\n          children: loading ? 'üîÑ Recherche...' : 'üîç Rechercher'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: '#fee',\n          color: '#c00',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          fontSize: '13px'\n        },\n        children: [\"\\u274C \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this), data.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          textAlign: 'center',\n          color: '#666',\n          fontSize: '14px'\n        },\n        children: \"\\uD83D\\uDCCD Effectuez une recherche pour afficher des entreprises\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            marginRight: '8px',\n            fontSize: '13px'\n          },\n          children: [data.length, \" entreprises\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            background: '#e8f0fe',\n            padding: '6px 12px',\n            borderRadius: '16px',\n            fontSize: '13px'\n          },\n          children: [filteredData.length, \" visibles\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500',\n            fontSize: '13px'\n          },\n          children: [\"\\uD83D\\uDCCD Rayon: \", filters.radius, \" km\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          step: \"5\",\n          value: filters.radius,\n          onChange: e => setFilters({\n            ...filters,\n            radius: parseInt(e.target.value)\n          }),\n          style: {\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: '500',\n            fontSize: '13px'\n          },\n          children: \"\\uD83C\\uDFE2 Secteur NAF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: filters.sector,\n          onChange: e => setFilters({\n            ...filters,\n            sector: e.target.value\n          }),\n          style: {\n            width: '100%',\n            padding: '10px',\n            borderRadius: '8px',\n            border: '1px solid #ddd'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Tous les secteurs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), sectors.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: s,\n            children: s\n          }, s, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 31\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '8px',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasEmail,\n            onChange: e => setFilters({\n              ...filters,\n              hasEmail: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), \"Avec Email\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: filters.hasPhone,\n            onChange: e => setFilters({\n              ...filters,\n              hasPhone: e.target.checked\n            }),\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), \"Avec T\\xE9l\\xE9phone\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto'\n        },\n        children: filteredData.map((company, i) => {\n          const isFav = favorites.has(company.siren);\n          const isSelected = selectedCompany === company.siren;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: isSelected ? '#e8f0fe' : 'white',\n              border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n              borderRadius: '12px',\n              padding: '16px',\n              marginBottom: '12px',\n              cursor: 'pointer',\n              transition: 'all 0.2s'\n            },\n            onClick: () => {\n              setSelectedCompany(company.siren);\n              const lat = parseFloat(company.latitude);\n              const lng = parseFloat(company.longitude);\n              if (lat && lng && mapInstance.current) {\n                mapInstance.current.setView([lat, lng], 14);\n                const marker = markersRef.current.find(m => {\n                  const pos = m.getLatLng();\n                  return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                });\n                if (marker) marker.openPopup();\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  fontSize: '15px'\n                },\n                children: company.name || company.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  toggleFavorite(company.siren);\n                },\n                style: {\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '20px',\n                  padding: '0 4px'\n                },\n                children: isFav ? '‚≠ê' : '‚òÜ'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '13px',\n                color: '#666'\n              },\n              children: [\"\\uD83D\\uDCCD \", company.ville, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 37\n              }, this), \"\\uD83C\\uDFE2 \", (company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        flex: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 5\n  }, this);\n}\n_s(MapProspects, \"ekooIzK1+yecWLu5Xf1quSsmFiY=\");\n_c = MapProspects;\nvar _c;\n$RefreshReg$(_c, \"MapProspects\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapProspects","onSearch","_s","mapRef","mapInstance","markersRef","data","setData","filteredData","setFilteredData","companyName","setCompanyName","postalCode","setPostalCode","loading","setLoading","error","setError","center","lat","lng","filters","setFilters","radius","sector","hasEmail","hasPhone","favorites","setFavorites","Set","JSON","parse","localStorage","getItem","selectedCompany","setSelectedCompany","handleSearch","e","preventDefault","res","fetch","method","headers","body","stringify","location","text","js","parseErr","status","ok","_js","companies","map","c","i","id","name","nom","nom_entreprise","address","adresse","adresse_siege","secteur","libelle_naf","site","site_web","telephone","contacts","latitude","longitude","ville","code_postal","naf","siren","length","firstLat","parseFloat","firstLng","current","isNaN","setView","err","message","tileLayer","attribution","maxZoom","addTo","console","log","forEach","m","removeLayer","bounds","seenAddresses","Map","company","addressKey","toFixed","has","set","hasContacts","isFavorite","iconColor","iconSize","customIcon","divIcon","className","html","iconAnchor","marker","icon","bindPopup","createPopupContent","on","push","fitBounds","padding","contactsHtml","poste","email","linkedin","join","applyFilters","filtered","filter","distance","calculateDistance","some","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","a","sin","cos","atan2","sqrt","toggleFavorite","newFavorites","delete","add","setItem","sectors","Boolean","style","display","height","children","width","background","borderRight","overflowY","flexDirection","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","fontWeight","type","placeholder","value","onChange","target","borderRadius","border","disabled","color","cursor","transition","textAlign","marginRight","min","max","step","parseInt","s","alignItems","checked","flex","isFav","isSelected","onClick","find","pos","getLatLng","abs","openPopup","justifyContent","stopPropagation","substring","ref","_c","$RefreshReg$"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/MapProspect.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix des ic√¥nes Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n});\n\nexport default function MapProspects({ onSearch }) {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [companyName, setCompanyName] = useState('');\n  const [postalCode, setPostalCode] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const center = { lat: 48.8566, lng: 2.3522 };\n  const [filters, setFilters] = useState({\n    radius: 100,\n    sector: '',\n    hasEmail: false,\n    hasPhone: false\n  });\n  const [favorites, setFavorites] = useState(() => {\n    return new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));\n  });\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  // Fonction de recherche\n  const handleSearch = async (e) => {\n    if (e) e.preventDefault();\n    \n    if (!companyName || !postalCode) {\n      setError('Nom et code postal requis');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch('http://localhost:5000/prospect', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ companyName, location: postalCode })\n      });\n\n      const text = await res.text();\n      let js = null;\n      \n      try {\n        js = text ? JSON.parse(text) : null;\n      } catch (parseErr) {\n        setError(`R√©ponse inattendue du serveur (status ${res.status})`);\n        setLoading(false);\n        return;\n      }\n\n      if (!res.ok) {\n        setError(js?.error || `Erreur serveur (${res.status})`);\n        setLoading(false);\n        return;\n      }\n\n      const companies = (js.data || []).map((c, i) => ({\n        id: i,\n        name: c.nom || c.nom_entreprise || \"Inconnu\",\n        address: c.adresse || c.adresse_siege || \"\",\n        sector: c.secteur || c.libelle_naf || \"\",\n        site: c.site_web || c.site || \"\",\n        telephone: c.telephone || \"\",\n        contacts: c.contacts || [],\n        latitude: c.latitude || c.lat || null,\n        longitude: c.longitude || c.lng || null,\n        ville: c.ville || \"\",\n        code_postal: c.code_postal || \"\",\n        adresse: c.adresse || \"\",\n        naf: c.naf || \"\",\n        siren: c.siren || `temp-${i}`\n      }));\n\n      setData(companies);\n      \n      // Centre la carte sur le premier r√©sultat\n      if (companies.length > 0 && companies[0].latitude && companies[0].longitude) {\n        const firstLat = parseFloat(companies[0].latitude);\n        const firstLng = parseFloat(companies[0].longitude);\n        if (mapInstance.current && !isNaN(firstLat) && !isNaN(firstLng)) {\n          mapInstance.current.setView([firstLat, firstLng], 12);\n        }\n      }\n\n    } catch (err) {\n      setError(err.message || 'Erreur r√©seau');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Initialise la carte Leaflet\n  useEffect(() => {\n    if (!mapRef.current || mapInstance.current) return;\n\n    mapInstance.current = L.map(mapRef.current).setView([center.lat, center.lng], 6);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '¬© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(mapInstance.current);\n\n    console.log('‚úÖ Carte Leaflet initialis√©e');\n  }, []);\n\n  // Cr√©e les markers\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    // Nettoie anciens markers\n    markersRef.current.forEach(m => mapInstance.current.removeLayer(m));\n    markersRef.current = [];\n\n    if (filteredData.length === 0) return;\n\n    const bounds = [];\n    const seenAddresses = new Map();\n\n    filteredData.forEach(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n\n      if (!lat || !lng || isNaN(lat) || isNaN(lng)) return;\n\n      // D√©duplication\n      const addressKey = `${lat.toFixed(4)},${lng.toFixed(4)}`;\n      if (seenAddresses.has(addressKey)) return;\n      seenAddresses.set(addressKey, true);\n\n      // Ic√¥ne personnalis√©e\n      const hasContacts = company.contacts && company.contacts.length > 0;\n      const isFavorite = favorites.has(company.siren);\n      \n      const iconColor = isFavorite ? '#f4b400' : (hasContacts ? '#0f9d58' : '#db4437');\n      const iconSize = isFavorite ? 32 : 24;\n\n      const customIcon = L.divIcon({\n        className: 'custom-leaflet-marker',\n        html: `<div style=\"\n          background: ${iconColor};\n          width: ${iconSize}px;\n          height: ${iconSize}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        \"></div>`,\n        iconSize: [iconSize, iconSize],\n        iconAnchor: [iconSize/2, iconSize/2]\n      });\n\n      const marker = L.marker([lat, lng], { icon: customIcon })\n        .addTo(mapInstance.current)\n        .bindPopup(() => createPopupContent(company))\n        .on('click', () => setSelectedCompany(company.siren));\n\n      markersRef.current.push(marker);\n      bounds.push([lat, lng]);\n    });\n\n    // Ajuste le zoom\n    if (bounds.length > 0) {\n      mapInstance.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [filteredData, favorites]);\n\n  // Popup personnalis√©e\n  const createPopupContent = (company) => {\n    const contactsHtml = company.contacts && company.contacts.length > 0\n      ? `\n        <div style=\"margin-top: 12px;\">\n          <strong>üë• Contacts (${company.contacts.length})</strong>\n          ${company.contacts.map(c => `\n            <div style=\"padding: 8px; background: #f8f9fa; border-radius: 6px; margin-top: 6px;\">\n              <div style=\"font-weight: 600;\">${c.nom || 'Nom inconnu'}</div>\n              <div style=\"font-size: 12px; color: #666;\">${c.poste || ''}</div>\n              ${c.email ? `<div style=\"font-size: 12px;\">‚úâÔ∏è ${c.email}</div>` : ''}\n              ${c.telephone ? `<div style=\"font-size: 12px;\">üìû ${c.telephone}</div>` : ''}\n              ${c.linkedin ? `<div style=\"font-size: 12px;\"><a href=\"${c.linkedin}\" target=\"_blank\">üîó LinkedIn</a></div>` : ''}\n            </div>\n          `).join('')}\n        </div>\n      `\n      : '<div style=\"color: #999; margin-top: 12px;\">Aucun contact disponible</div>';\n\n    return `\n      <div style=\"max-width: 350px; padding: 12px;\">\n        <h3 style=\"margin: 0 0 12px 0; padding-bottom: 8px; border-bottom: 2px solid #1a73e8;\">\n          ${company.name || company.nom || 'Entreprise'}\n        </h3>\n        <p style=\"margin: 8px 0;\">\n          <strong>üìç Adresse</strong><br>\n          ${company.address || company.adresse || ''}<br>\n          ${company.code_postal || ''} ${company.ville || ''}\n        </p>\n        <p style=\"margin: 8px 0;\">\n          <strong>üè¢ Secteur</strong><br>\n          ${company.sector || company.secteur || 'Non renseign√©'}<br>\n          <span style=\"color: #999; font-size: 12px;\">NAF: ${company.naf || 'N/A'}</span>\n        </p>\n        ${company.site || company.site_web ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üåê Site web</strong><br>\n            <a href=\"${company.site || company.site_web}\" target=\"_blank\">${company.site || company.site_web}</a>\n          </p>\n        ` : ''}\n        ${company.telephone ? `\n          <p style=\"margin: 8px 0;\">\n            <strong>üìû T√©l√©phone</strong><br>\n            <a href=\"tel:${company.telephone}\">${company.telephone}</a>\n          </p>\n        ` : ''}\n        ${contactsHtml}\n      </div>\n    `;\n  };\n\n  // Applique les filtres\n  const applyFilters = () => {\n    let filtered = data.filter(company => {\n      const lat = parseFloat(company.latitude);\n      const lng = parseFloat(company.longitude);\n      \n      if (!lat || !lng) return false;\n\n      // Filtre rayon\n      const distance = calculateDistance(center.lat, center.lng, lat, lng);\n      if (distance > filters.radius) return false;\n\n      // Filtre secteur\n      if (filters.sector && company.naf !== filters.sector) return false;\n\n      // Filtre email\n      if (filters.hasEmail && (!company.contacts || !company.contacts.some(c => c.email))) {\n        return false;\n      }\n\n      // Filtre t√©l√©phone\n      if (filters.hasPhone && !company.telephone && (!company.contacts || !company.contacts.some(c => c.telephone))) {\n        return false;\n      }\n\n      return true;\n    });\n\n    setFilteredData(filtered);\n  };\n\n  useEffect(() => {\n    applyFilters();\n  }, [filters, data]);\n\n  // Calcul distance (Haversine)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n              Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  };\n\n  // Toggle favoris\n  const toggleFavorite = (siren) => {\n    const newFavorites = new Set(favorites);\n    if (newFavorites.has(siren)) {\n      newFavorites.delete(siren);\n    } else {\n      newFavorites.add(siren);\n    }\n    setFavorites(newFavorites);\n    localStorage.setItem('favorites', JSON.stringify([...newFavorites]));\n  };\n\n  const sectors = [...new Set(data.map(c => c.naf).filter(Boolean))];\n\n  return (\n    <div style={{ display: 'flex', height: '100vh' }}>\n      {/* Sidebar */}\n      <div style={{ \n        width: '380px', \n        background: 'white', \n        borderRight: '1px solid #ddd', \n        overflowY: 'auto', \n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column'\n      }}>\n        <h2 style={{ marginBottom: '16px', fontSize: '20px' }}>üéØ Prospection</h2>\n        \n        {/* Formulaire de recherche */}\n        <form onSubmit={handleSearch} style={{ marginBottom: '20px' }}>\n          <div style={{ marginBottom: '12px' }}>\n            <label style={{ display: 'block', marginBottom: '6px', fontWeight: '500', fontSize: '13px' }}>\n              Nom entreprise\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Ex: Castorama\"\n              value={companyName}\n              onChange={(e) => setCompanyName(e.target.value)}\n              style={{ \n                width: '100%', \n                padding: '10px', \n                borderRadius: '8px', \n                border: '1px solid #ddd',\n                fontSize: '14px'\n              }}\n            />\n          </div>\n          \n          <div style={{ marginBottom: '12px' }}>\n            <label style={{ display: 'block', marginBottom: '6px', fontWeight: '500', fontSize: '13px' }}>\n              Code postal\n            </label>\n            <input\n              type=\"text\"\n              placeholder=\"Ex: 75015\"\n              value={postalCode}\n              onChange={(e) => setPostalCode(e.target.value)}\n              style={{ \n                width: '100%', \n                padding: '10px', \n                borderRadius: '8px', \n                border: '1px solid #ddd',\n                fontSize: '14px'\n              }}\n            />\n          </div>\n          \n          <button \n            type=\"submit\" \n            disabled={loading}\n            style={{ \n              width: '100%', \n              padding: '12px', \n              background: loading ? '#ccc' : '#1a73e8',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              fontSize: '15px',\n              fontWeight: '600',\n              cursor: loading ? 'not-allowed' : 'pointer',\n              transition: 'background 0.2s'\n            }}\n          >\n            {loading ? 'üîÑ Recherche...' : 'üîç Rechercher'}\n          </button>\n        </form>\n\n        {error && (\n          <div style={{ \n            padding: '12px', \n            background: '#fee', \n            color: '#c00', \n            borderRadius: '8px', \n            marginBottom: '16px',\n            fontSize: '13px'\n          }}>\n            ‚ùå {error}\n          </div>\n        )}\n\n        {data.length === 0 && !loading && (\n          <div style={{ \n            padding: '20px', \n            textAlign: 'center', \n            color: '#666',\n            fontSize: '14px'\n          }}>\n            üìç Effectuez une recherche pour afficher des entreprises\n          </div>\n        )}\n        <div style={{ marginBottom: '20px' }}>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', marginRight: '8px', fontSize: '13px' }}>\n            {data.length} entreprises\n          </span>\n          <span style={{ background: '#e8f0fe', padding: '6px 12px', borderRadius: '16px', fontSize: '13px' }}>\n            {filteredData.length} visibles\n          </span>\n        </div>\n\n        {/* Filtres */}\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', fontSize: '13px' }}>\n            üìç Rayon: {filters.radius} km\n          </label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            step=\"5\"\n            value={filters.radius}\n            onChange={(e) => setFilters({ ...filters, radius: parseInt(e.target.value) })}\n            style={{ width: '100%' }}\n          />\n        </div>\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500', fontSize: '13px' }}>üè¢ Secteur NAF</label>\n          <select\n            value={filters.sector}\n            onChange={(e) => setFilters({ ...filters, sector: e.target.value })}\n            style={{ width: '100%', padding: '10px', borderRadius: '8px', border: '1px solid #ddd' }}\n          >\n            <option value=\"\">Tous les secteurs</option>\n            {sectors.map(s => <option key={s} value={s}>{s}</option>)}\n          </select>\n        </div>\n\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'flex', alignItems: 'center', marginBottom: '8px', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasEmail}\n              onChange={(e) => setFilters({ ...filters, hasEmail: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec Email\n          </label>\n          <label style={{ display: 'flex', alignItems: 'center', fontSize: '14px' }}>\n            <input\n              type=\"checkbox\"\n              checked={filters.hasPhone}\n              onChange={(e) => setFilters({ ...filters, hasPhone: e.target.checked })}\n              style={{ marginRight: '8px' }}\n            />\n            Avec T√©l√©phone\n          </label>\n        </div>\n\n        {/* Liste */}\n        <div style={{ flex: 1, overflowY: 'auto' }}>\n          {filteredData.map((company, i) => {\n            const isFav = favorites.has(company.siren);\n            const isSelected = selectedCompany === company.siren;\n            return (\n              <div\n                key={i}\n                style={{\n                  background: isSelected ? '#e8f0fe' : 'white',\n                  border: `1px solid ${isSelected ? '#1a73e8' : '#ddd'}`,\n                  borderRadius: '12px',\n                  padding: '16px',\n                  marginBottom: '12px',\n                  cursor: 'pointer',\n                  transition: 'all 0.2s'\n                }}\n                onClick={() => {\n                  setSelectedCompany(company.siren);\n                  const lat = parseFloat(company.latitude);\n                  const lng = parseFloat(company.longitude);\n                  if (lat && lng && mapInstance.current) {\n                    mapInstance.current.setView([lat, lng], 14);\n                    const marker = markersRef.current.find(m => {\n                      const pos = m.getLatLng();\n                      return Math.abs(pos.lat - lat) < 0.0001 && Math.abs(pos.lng - lng) < 0.0001;\n                    });\n                    if (marker) marker.openPopup();\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\n                  <strong style={{ fontSize: '15px' }}>{company.name || company.nom}</strong>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      toggleFavorite(company.siren);\n                    }}\n                    style={{ \n                      background: 'none', \n                      border: 'none', \n                      cursor: 'pointer', \n                      fontSize: '20px',\n                      padding: '0 4px'\n                    }}\n                  >\n                    {isFav ? '‚≠ê' : '‚òÜ'}\n                  </button>\n                </div>\n                <div style={{ fontSize: '13px', color: '#666' }}>\n                  üìç {company.ville}<br />\n                  üè¢ {(company.sector || company.secteur || 'Secteur non renseign√©').substring(0, 50)}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Carte */}\n      <div ref={mapRef} style={{ flex: 1 }} />\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}