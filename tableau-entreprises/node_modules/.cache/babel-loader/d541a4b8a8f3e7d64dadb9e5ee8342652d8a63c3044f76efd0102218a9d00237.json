{"ast":null,"code":"var _jsxFileName = \"/home/dehlia/prospection/tableau-entreprises/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport CompanyProspectList from \"./companyprospect\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [companyName, setCompanyName] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  async function handleSearch() {\n    if (!companyName || !postalCode) {\n      alert(\"Veuillez entrer le nom et le code postal de l'entreprise.\");\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setData([]); // ‚úÖ corrige setProspects([])\n\n    try {\n      const response = await fetch(\"http://localhost:5000/prospect\", {\n        // üîß Si tu as un proxy dans package.json, tu peux laisser simplement \"/prospect\"\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          companyName,\n          location: postalCode\n        })\n      });\n      const result = await response.json(); // ‚úÖ d√©finit result ici\n\n      console.log(\"Donn√©es re√ßues :\", result); // debug\n\n      if (!response.ok) {\n        throw new Error(result.error || \"Erreur lors de la recherche\");\n      }\n\n      // ‚úÖ On tente de parser le JSON renvoy√© par le backend\n      let parsedData = [];\n      try {\n        parsedData = JSON.parse(result.result);\n      } catch {\n        parsedData = Array.isArray(result) ? result : [result];\n      }\n      setData(parsedData);\n    } catch (err) {\n      console.error(\"Erreur :\", err);\n      setError(\"Impossible de r√©cup√©rer les donn√©es. V√©rifiez le backend.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Prospection Entreprises\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: companyName,\n        onChange: e => setCompanyName(e.target.value),\n        placeholder: \"Nom de l'entreprise\",\n        className: \"flex-1 p-2 border rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: postalCode,\n        onChange: e => setPostalCode(e.target.value),\n        placeholder: \"Code postal\",\n        className: \"flex-1 p-2 border rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSearch,\n        className: \"px-3 py-2 bg-slate-700 text-white rounded\",\n        disabled: loading,\n        children: loading ? \"Recherche...\" : \"Rechercher\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-600\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this), data.length > 0 && /*#__PURE__*/_jsxDEV(CompanyProspectList, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"IitQKlUG1vlEllv/da0Ef6oAo2k=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","CompanyProspectList","jsxDEV","_jsxDEV","App","_s","companyName","setCompanyName","postalCode","setPostalCode","data","setData","loading","setLoading","error","setError","handleSearch","alert","response","fetch","method","headers","body","JSON","stringify","location","result","json","console","log","ok","Error","parsedData","parse","Array","isArray","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onClick","disabled","length","_c","$RefreshReg$"],"sources":["/home/dehlia/prospection/tableau-entreprises/frontend/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport CompanyProspectList from \"./companyprospect\";\n\nexport default function App() {\n  const [companyName, setCompanyName] = useState(\"\");\n  const [postalCode, setPostalCode] = useState(\"\");\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  async function handleSearch() {\n    if (!companyName || !postalCode) {\n      alert(\"Veuillez entrer le nom et le code postal de l'entreprise.\");\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setData([]); // ‚úÖ corrige setProspects([])\n\n    try {\n      const response = await fetch(\"http://localhost:5000/prospect\", {\n        // üîß Si tu as un proxy dans package.json, tu peux laisser simplement \"/prospect\"\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ companyName, location: postalCode }),\n      });\n\n      const result = await response.json(); // ‚úÖ d√©finit result ici\n\n      console.log(\"Donn√©es re√ßues :\", result); // debug\n\n      if (!response.ok) {\n        throw new Error(result.error || \"Erreur lors de la recherche\");\n      }\n\n      // ‚úÖ On tente de parser le JSON renvoy√© par le backend\n      let parsedData = [];\n      try {\n        parsedData = JSON.parse(result.result);\n      } catch {\n        parsedData = Array.isArray(result) ? result : [result];\n      }\n\n      setData(parsedData);\n    } catch (err) {\n      console.error(\"Erreur :\", err);\n      setError(\"Impossible de r√©cup√©rer les donn√©es. V√©rifiez le backend.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4\">\n      <h1 className=\"text-2xl font-bold mb-4\">Prospection Entreprises</h1>\n\n      <div className=\"flex gap-2 mb-4\">\n        <input\n          value={companyName}\n          onChange={(e) => setCompanyName(e.target.value)}\n          placeholder=\"Nom de l'entreprise\"\n          className=\"flex-1 p-2 border rounded\"\n        />\n        <input\n          value={postalCode}\n          onChange={(e) => setPostalCode(e.target.value)}\n          placeholder=\"Code postal\"\n          className=\"flex-1 p-2 border rounded\"\n        />\n        <button\n          onClick={handleSearch}\n          className=\"px-3 py-2 bg-slate-700 text-white rounded\"\n          disabled={loading}\n        >\n          {loading ? \"Recherche...\" : \"Rechercher\"}\n        </button>\n      </div>\n\n      {error && <p className=\"text-red-600\">{error}</p>}\n      {data.length > 0 && <CompanyProspectList data={data} />}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}